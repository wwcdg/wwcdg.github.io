<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mybatis框架学习 | 未完成的歌</title>
  <meta name="keywords" content=" Mybatis ">
  <meta name="description" content="Mybatis框架学习 | 未完成的歌">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="[toc] 前言：简单总结下Google Hacking语法。 一、什么是Google Hacking？Google Hacking是指使用Google、百度等搜索引擎对某些特定网站主机漏洞进行搜索，以达到快速找到漏洞主机或特定主机的漏洞的目的。 对于普通用户而言，Google只是一款强大的搜索引擎，而对于渗透人员而言，它可能是一款绝佳的渗透工具。正因为Google的检索能力强大，我们可以构造特殊">
<meta property="og:type" content="article">
<meta property="og:title" content="Google Hacking语法总结">
<meta property="og:url" content="https://github.com/wwcdg/wwcdg.github.io/2022/01/17/Google%20Hacking%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="未完成的歌">
<meta property="og:description" content="[toc] 前言：简单总结下Google Hacking语法。 一、什么是Google Hacking？Google Hacking是指使用Google、百度等搜索引擎对某些特定网站主机漏洞进行搜索，以达到快速找到漏洞主机或特定主机的漏洞的目的。 对于普通用户而言，Google只是一款强大的搜索引擎，而对于渗透人员而言，它可能是一款绝佳的渗透工具。正因为Google的检索能力强大，我们可以构造特殊">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210121211831580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20210121214752387.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2022-01-17T13:05:34.752Z">
<meta property="article:modified_time" content="2022-01-17T13:07:29.322Z">
<meta property="article:author" content="未完成的歌">
<meta property="article:tag" content="Google Hacking">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20210121211831580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>未完成的歌</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/wwcdg"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/qq_43531669?spm=1011.2124.3001.5343"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/hfdyhddy"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=2058751973&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=618338817"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:2058751973@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(67)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="漏洞原理">
                        <i class="fold iconfont icon-right"></i>
                        
                        漏洞原理
                        <small>(13)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="漏洞原理<--->CSRF">
                                        
                                        CSRF
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->Sql注入">
                                        
                                        Sql注入
                                        
                                            <small>(5
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->SSRF">
                                        
                                        SSRF
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->XSS">
                                        
                                        XSS
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->XXE">
                                        
                                        XXE
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->命令执行">
                                        
                                        命令执行
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="漏洞原理<--->文件上传">
                                        
                                        文件上传
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Web开发">
                        <i class="fold iconfont icon-right"></i>
                        
                        Web开发
                        <small>(13)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Web开发<--->JavaEE">
                                        
                                        JavaEE
                                        
                                            <small>(4
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Web开发<--->JavaSE">
                                        
                                        JavaSE
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Web开发<--->JavaWeb">
                                        
                                        JavaWeb
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Web开发<--->PHP">
                                        
                                        PHP
                                        
                                            <small>(3
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Web开发<--->前端">
                                        
                                        前端
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="CTF">
                        <i class="fold iconfont icon-right"></i>
                        
                        CTF
                        <small>(22)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="CTF<--->Crypto">
                                        
                                        Crypto
                                        
                                            <small>(5
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="CTF<--->MISC">
                                        
                                        MISC
                                        
                                            <small>(13
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="CTF<--->Web">
                                        
                                        Web
                                        
                                            <small>(4
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Blog搭建">
                        
                        Blog搭建
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="Docker">
                        
                        Docker
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="Liunx">
                        
                        Liunx
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="Python">
                        
                        Python
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="工具使用">
                        
                        工具使用
                        <small>(5)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="数据库">
                        
                        数据库
                        <small>(6)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="线下赛">
                        
                        线下赛
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="网络协议">
                        
                        网络协议
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="67">
<input type="hidden" id="yelog_site_word_count" value="136.1k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>crc碰撞</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>crypto</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Crypto</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>csrf</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>css</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Google Hacking</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>html</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>http</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>javase</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>javaweb</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>liunx</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LSB</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>misc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mybatis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nmap</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>php</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>PHP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SpringMVC</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sqlmap</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sql注入</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ssrf</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>web</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>xss</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>xxe</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>上传漏洞</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>伪加密</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>信息收集</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>命令执行</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>密码学</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据库</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>暴力破解</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>杂项</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>盲水印</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>隐写</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class="全部文章 工具使用 "
           href="/2022/01/17/Google%20Hacking%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/"
           data-tag="Google Hacking"
           data-author="" >
            <span class="post-title" title="Google Hacking语法总结">Google Hacking语法总结</span>
            <span class="post-date" title="2022-01-17 21:05:34">2022/01/17</span>
        </a>
        
        <a  class="全部文章 漏洞原理 XSS "
           href="/2022/01/14/XSS%20(%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB)%20%E5%88%86%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98/"
           data-tag="xss"
           data-author="" >
            <span class="post-title" title="XSS (跨站脚本攻击) 分析与实战">XSS (跨站脚本攻击) 分析与实战</span>
            <span class="post-date" title="2022-01-14 23:39:33">2022/01/14</span>
        </a>
        
        <a  class="全部文章 漏洞原理 Sql注入 "
           href="/2021/12/16/DVWA%E2%80%94%E2%80%94Sqlmap%E7%BB%83%E4%B9%A0/"
           data-tag="sql注入"
           data-author="" >
            <span class="post-title" title="DVWA——Sqlmap练习">DVWA——Sqlmap练习</span>
            <span class="post-date" title="2021-12-16 13:19:01">2021/12/16</span>
        </a>
        
        <a  class="全部文章 网络协议 "
           href="/2021/12/16/HTTP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"
           data-tag="http"
           data-author="" >
            <span class="post-title" title="HTTP协议详解">HTTP协议详解</span>
            <span class="post-date" title="2021-12-16 13:18:39">2021/12/16</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaEE "
           href="/2021/12/16/SpringMVC%20%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95/"
           data-tag="SpringMVC"
           data-author="" >
            <span class="post-title" title="SpringMVC 实现注册登录">SpringMVC 实现注册登录</span>
            <span class="post-date" title="2021-12-16 13:16:44">2021/12/16</span>
        </a>
        
        <a  class="全部文章 工具使用 "
           href="/2021/10/07/sqlmap%20%E2%80%94%E2%80%94%20os-shell%E5%8F%82%E6%95%B0%E5%88%86%E6%9E%90/"
           data-tag="sqlmap"
           data-author="" >
            <span class="post-title" title="sqlmap —— os-shell参数分析">sqlmap —— os-shell参数分析</span>
            <span class="post-date" title="2021-10-07 21:56:14">2021/10/07</span>
        </a>
        
        <a  class="全部文章 工具使用 "
           href="/2021/09/06/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E7%AF%87/"
           data-tag="信息收集"
           data-author="" >
            <span class="post-title" title="渗透测试之信息收集篇">渗透测试之信息收集篇</span>
            <span class="post-date" title="2021-09-06 16:36:04">2021/09/06</span>
        </a>
        
        <a  class="全部文章 Docker "
           href="/2021/08/15/Docker%20%E7%BB%83%E4%B9%A0(%E4%B8%80)%E2%80%94%E2%80%94%E6%90%AD%E5%BB%BAweb%E6%9C%8D%E5%8A%A1/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="Docker练习(一)——搭建web服务">Docker练习(一)——搭建web服务</span>
            <span class="post-date" title="2021-08-15 20:54:09">2021/08/15</span>
        </a>
        
        <a  class="全部文章 Docker "
           href="/2021/08/15/Docker%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="Docker容器学习(一)">Docker容器学习(一)</span>
            <span class="post-date" title="2021-08-15 20:53:56">2021/08/15</span>
        </a>
        
        <a  class="全部文章 工具使用 "
           href="/2021/03/02/Nmap%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/"
           data-tag="nmap"
           data-author="" >
            <span class="post-title" title="Nmap使用详解">Nmap使用详解</span>
            <span class="post-date" title="2021-03-02 16:57:06">2021/03/02</span>
        </a>
        
        <a  class="全部文章 工具使用 "
           href="/2021/02/19/SQLMap%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/"
           data-tag="sqlmap"
           data-author="" >
            <span class="post-title" title="SQLMap使用详解">SQLMap使用详解</span>
            <span class="post-date" title="2021-02-19 00:29:30">2021/02/19</span>
        </a>
        
        <a  class="全部文章 漏洞原理 SSRF "
           href="/2021/02/03/SSRF%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"
           data-tag="ssrf"
           data-author="" >
            <span class="post-title" title="SSRF漏洞原理解析">SSRF漏洞原理解析</span>
            <span class="post-date" title="2021-02-03 21:14:13">2021/02/03</span>
        </a>
        
        <a  class="全部文章 漏洞原理 CSRF "
           href="/2021/02/02/%E4%BB%8ECSRF%E5%8E%9F%E7%90%86%E5%88%B0CMS%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/"
           data-tag="csrf"
           data-author="" >
            <span class="post-title" title="从CSRF原理到CMS漏洞利用">从CSRF原理到CMS漏洞利用</span>
            <span class="post-date" title="2021-02-02 20:43:51">2021/02/02</span>
        </a>
        
        <a  class="全部文章 漏洞原理 XXE "
           href="/2021/02/01/XML%E5%A4%96%E9%83%A8%E5%AE%9E%E4%BD%93%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E2%80%94%E2%80%94XXE%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90/"
           data-tag="xxe"
           data-author="" >
            <span class="post-title" title="XML外部实体注入漏洞——XXE简单分析">XML外部实体注入漏洞——XXE简单分析</span>
            <span class="post-date" title="2021-02-01 20:33:03">2021/02/01</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaEE "
           href="/2021/01/20/Java%20EE%E2%80%94%E2%80%94Mybatis%20%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"
           data-tag="Mybatis"
           data-author="" >
            <span class="post-title" title="Mybatis框架学习">Mybatis框架学习</span>
            <span class="post-date" title="2021-01-20 22:27:01">2021/01/20</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/01/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/"
           data-tag="数据库"
           data-author="" >
            <span class="post-title" title="数据库系统（五）——数据库设计">数据库系统（五）——数据库设计</span>
            <span class="post-date" title="2021-01-03 21:13:52">2021/01/03</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/01/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94%E8%A7%A6%E5%8F%91%E5%99%A8/"
           data-tag="数据库"
           data-author="" >
            <span class="post-title" title="数据库系统（四）——触发器">数据库系统（四）——触发器</span>
            <span class="post-date" title="2021-01-03 19:07:35">2021/01/03</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/01/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6/"
           data-tag="数据库"
           data-author="" >
            <span class="post-title" title="数据库系统（三）——数据库安全性控制">数据库系统（三）——数据库安全性控制</span>
            <span class="post-date" title="2021-01-02 15:34:16">2021/01/02</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/01/01/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E5%92%8C%E8%A7%86%E5%9B%BE/"
           data-tag="数据库"
           data-author="" >
            <span class="post-title" title="数据库系统（二）——数据更新和视图">数据库系统（二）——数据更新和视图</span>
            <span class="post-date" title="2021-01-01 21:29:15">2021/01/01</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2021/01/01/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/"
           data-tag="数据库"
           data-author="" >
            <span class="post-title" title="数据库系统（一）——数据查询">数据库系统（一）——数据查询</span>
            <span class="post-date" title="2021-01-01 20:40:24">2021/01/01</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaEE "
           href="/2020/11/03/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AASpring%20MVC%E7%A8%8B%E5%BA%8F/"
           data-tag="SpringMVC"
           data-author="" >
            <span class="post-title" title="我的第一个Spring MVC程序">我的第一个Spring MVC程序</span>
            <span class="post-date" title="2020-11-03 20:30:54">2020/11/03</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaEE "
           href="/2020/11/03/Java%20EE%E2%80%94%E2%80%94SpringMVC%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"
           data-tag="SpringMVC"
           data-author="" >
            <span class="post-title" title="SpringMVC框架学习">SpringMVC框架学习</span>
            <span class="post-date" title="2020-11-03 20:30:54">2020/11/03</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaWeb "
           href="/2020/09/28/Java%20web%E2%80%94Cookie%E4%B8%8ESession%E5%AF%B9%E8%B1%A1/"
           data-tag="javaweb"
           data-author="" >
            <span class="post-title" title="Cookie与Session对象">Cookie与Session对象</span>
            <span class="post-date" title="2020-09-28 20:08:27">2020/09/28</span>
        </a>
        
        <a  class="全部文章 Liunx "
           href="/2020/09/28/Linux%E4%B8%8Btar%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B/"
           data-tag="liunx"
           data-author="" >
            <span class="post-title" title="Linux下tar命令简介">Linux下tar命令简介</span>
            <span class="post-date" title="2020-09-28 20:07:27">2020/09/28</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaSE "
           href="/2020/09/28/Java%20SE%20%E9%87%8D%E7%82%B9%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0/"
           data-tag="javase"
           data-author="" >
            <span class="post-title" title="JavaSE 重点知识笔记">JavaSE 重点知识笔记</span>
            <span class="post-date" title="2020-09-28 20:07:27">2020/09/28</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaSE "
           href="/2020/09/28/Java%20SE%E2%80%94%E2%80%94%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0/"
           data-tag="javase"
           data-author="" >
            <span class="post-title" title="JavaSE——多线程学习">JavaSE——多线程学习</span>
            <span class="post-date" title="2020-09-28 20:07:27">2020/09/28</span>
        </a>
        
        <a  class="全部文章 Web开发 JavaWeb "
           href="/2020/09/28/Java%20web%E2%80%94Servlet%E8%BF%87%E6%BB%A4%E5%99%A8(Filter)/"
           data-tag="javaweb"
           data-author="" >
            <span class="post-title" title="Servlet过滤器——Filter">Servlet过滤器——Filter</span>
            <span class="post-date" title="2020-09-28 20:06:27">2020/09/28</span>
        </a>
        
        <a  class="全部文章 Python "
           href="/2019/12/05/Python%20%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="Python 爬虫学习（一）">Python 爬虫学习（一）</span>
            <span class="post-date" title="2019-12-05 15:13:07">2019/12/05</span>
        </a>
        
        <a  class="全部文章 Python "
           href="/2019/12/05/python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="Python学习笔记（一）">Python学习笔记（一）</span>
            <span class="post-date" title="2019-12-05 15:13:07">2019/12/05</span>
        </a>
        
        <a  class="全部文章 CTF Web "
           href="/2019/11/03/i%E6%98%A5%E7%A7%8B%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%20web(%E4%B8%80)/"
           data-tag="web"
           data-author="" >
            <span class="post-title" title="i春秋做题记录 web(一)">i春秋做题记录 web(一)</span>
            <span class="post-date" title="2019-11-03 17:28:45">2019/11/03</span>
        </a>
        
        <a  class="全部文章 CTF Web "
           href="/2019/10/15/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%20Web%E8%BF%9B%E9%98%B6(%E4%B8%80)/"
           data-tag="web"
           data-author="" >
            <span class="post-title" title="攻防世界 Web进阶(一)">攻防世界 Web进阶(一)</span>
            <span class="post-date" title="2019-10-15 21:11:43">2019/10/15</span>
        </a>
        
        <a  class="全部文章 CTF Web "
           href="/2019/10/05/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%20web%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="web"
           data-author="" >
            <span class="post-title" title="攻防世界 web（二）">攻防世界 web（二）</span>
            <span class="post-date" title="2019-10-05 13:51:25">2019/10/05</span>
        </a>
        
        <a  class="全部文章 CTF Web "
           href="/2019/09/12/Bugku%E2%80%94%E2%80%94web(%E4%B8%80)/"
           data-tag="web"
           data-author="" >
            <span class="post-title" title="Bugku web(一)">Bugku web(一)</span>
            <span class="post-date" title="2019-09-12 08:07:25">2019/09/12</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/09/12/BUU%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95%E2%80%94%E2%80%94Misc(%E4%B8%80)/"
           data-tag="misc"
           data-author="" >
            <span class="post-title" title="BUU刷题记录——Misc(一)">BUU刷题记录——Misc(一)</span>
            <span class="post-date" title="2019-09-12 08:07:25">2019/09/12</span>
        </a>
        
        <a  class="全部文章 漏洞原理 Sql注入 "
           href="/2019/09/01/%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8%E8%AF%A6%E8%A7%A3%20Sqli-labs%E9%97%AF%E5%85%B3(Less%209%E2%80%9410)/"
           data-tag="sql注入"
           data-author="" >
            <span class="post-title" title="时间盲注详解 Sqli-labs闯关(Less 9—10)">时间盲注详解 Sqli-labs闯关(Less 9—10)</span>
            <span class="post-date" title="2019-09-01 19:59:43">2019/09/01</span>
        </a>
        
        <a  class="全部文章 漏洞原理 命令执行 "
           href="/2019/08/20/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%EF%BC%88Commnd%20Execution%EF%BC%89%E6%80%BB%E7%BB%93/"
           data-tag="命令执行"
           data-author="" >
            <span class="post-title" title="命令执行漏洞（Commnd Execution）总结">命令执行漏洞（Commnd Execution）总结</span>
            <span class="post-date" title="2019-08-20 17:20:28">2019/08/20</span>
        </a>
        
        <a  class="全部文章 CTF Crypto "
           href="/2019/08/17/RSA%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E5%8E%9F%E7%90%86/"
           data-tag="密码学"
           data-author="" >
            <span class="post-title" title="RSA加密解密原理">RSA加密解密原理</span>
            <span class="post-date" title="2019-08-17 00:26:38">2019/08/17</span>
        </a>
        
        <a  class="全部文章 CTF Crypto "
           href="/2019/08/17/%E5%AF%86%E7%A0%81%E5%AD%A6%E2%80%94%E2%80%94RSA%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E8%AF%A6%E8%A7%A3/"
           data-tag="密码学"
           data-author="" >
            <span class="post-title" title="密码学—RSA加密解密详解">密码学—RSA加密解密详解</span>
            <span class="post-date" title="2019-08-17 00:26:38">2019/08/17</span>
        </a>
        
        <a  class="全部文章 漏洞原理 文件上传 "
           href="/2019/08/14/%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%20upload-labs%20%E7%BB%83%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="上传漏洞"
           data-author="" >
            <span class="post-title" title="上传漏洞 upload-labs 练习（二）">上传漏洞 upload-labs 练习（二）</span>
            <span class="post-date" title="2019-08-14 13:52:01">2019/08/14</span>
        </a>
        
        <a  class="全部文章 漏洞原理 文件上传 "
           href="/2019/08/08/%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%20upload-labs%20%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"
           data-tag="上传漏洞"
           data-author="" >
            <span class="post-title" title="上传漏洞 upload-labs 练习（一）">上传漏洞 upload-labs 练习（一）</span>
            <span class="post-date" title="2019-08-08 22:19:21">2019/08/08</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/08/02/%E5%B8%B8%E8%A7%81%E7%9A%8416%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E5%A4%B4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="常见的16进制文件头">常见的16进制文件头</span>
            <span class="post-date" title="2019-08-02 22:45:27">2019/08/02</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/08/01/Bugku%20%E6%9D%82%E9%A1%B9%EF%BC%88%E4%B8%89%EF%BC%89/"
           data-tag="杂项"
           data-author="" >
            <span class="post-title" title="Bugku杂项(三)">Bugku杂项(三)</span>
            <span class="post-date" title="2019-08-01 20:06:27">2019/08/01</span>
        </a>
        
        <a  class="全部文章 漏洞原理 Sql注入 "
           href="/2019/07/29/Sqli-labs%E9%97%AF%E5%85%B3%20Bool%E7%9B%B2%E6%B3%A8%E8%AF%A6%E8%A7%A3%EF%BC%88Less-8%EF%BC%89/"
           data-tag="sql注入"
           data-author="" >
            <span class="post-title" title="Sqli-labs闯关 Bool盲注详解!（Less-8）">Sqli-labs闯关 Bool盲注详解!（Less-8）</span>
            <span class="post-date" title="2019-07-29 22:44:56">2019/07/29</span>
        </a>
        
        <a  class="全部文章 漏洞原理 Sql注入 "
           href="/2019/07/28/Sqli-labs%E9%97%AF%E5%85%B3(Less1%E2%80%948)%20%E8%AF%A6%E7%BB%86%EF%BC%81/"
           data-tag="sql注入"
           data-author="" >
            <span class="post-title" title="Sqli-labs闯关记录(Less1—8) 详细！">Sqli-labs闯关记录(Less1—8) 详细！</span>
            <span class="post-date" title="2019-07-28 23:23:09">2019/07/28</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/07/25/%E5%AE%9E%E9%AA%8C%E5%90%A7--%E9%9A%90%E5%86%99%E6%9C%AF/"
           data-tag="隐写"
           data-author="" >
            <span class="post-title" title="实验吧--隐写术">实验吧--隐写术</span>
            <span class="post-date" title="2019-07-25 14:15:50">2019/07/25</span>
        </a>
        
        <a  class="全部文章 CTF Crypto "
           href="/2019/07/21/%E5%AF%86%E7%A0%81%E5%AD%A6%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="crypto"
           data-author="" >
            <span class="post-title" title="密码学（二）">密码学（二）</span>
            <span class="post-date" title="2019-07-21 16:12:54">2019/07/21</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/07/18/Bugku%20%E6%9D%82%E9%A1%B9%EF%BC%88%E4%BA%8C%EF%BC%89/"
           data-tag="misc"
           data-author="" >
            <span class="post-title" title="Bugku杂项(二)">Bugku杂项(二)</span>
            <span class="post-date" title="2019-07-18 21:57:30">2019/07/18</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/07/14/Bugku%20%E6%9D%82%E9%A1%B9/"
           data-tag="misc"
           data-author="" >
            <span class="post-title" title="Bugku杂项(一)">Bugku杂项(一)</span>
            <span class="post-date" title="2019-07-14 18:59:20">2019/07/14</span>
        </a>
        
        <a  class="全部文章 CTF Crypto "
           href="/2019/07/14/%E5%AE%9E%E9%AA%8C%E5%90%A7--%E5%AF%86%E7%A0%81%E5%AD%A6/"
           data-tag="Crypto"
           data-author="" >
            <span class="post-title" title="实验吧--密码学">实验吧--密码学</span>
            <span class="post-date" title="2019-07-14 00:17:13">2019/07/14</span>
        </a>
        
        <a  class="全部文章 CTF Crypto "
           href="/2019/07/14/Bugku%20%E5%AF%86%E7%A0%81%E5%AD%A6(%E4%B8%80)/"
           data-tag="Crypto"
           data-author="" >
            <span class="post-title" title="Bugku密码学（一）">Bugku密码学（一）</span>
            <span class="post-date" title="2019-07-14 00:17:13">2019/07/14</span>
        </a>
        
        <a  class="全部文章 漏洞原理 XSS "
           href="/2019/07/13/Xss-labs%E9%97%AF%E5%85%B3%E6%80%BB%E7%BB%93/"
           data-tag="xss"
           data-author="" >
            <span class="post-title" title="Xss-labs闯关总结">Xss-labs闯关总结</span>
            <span class="post-date" title="2019-07-13 13:52:42">2019/07/13</span>
        </a>
        
        <a  class="全部文章 漏洞原理 Sql注入 "
           href="/2019/06/10/Sqli-labs%E7%AC%AC%E4%B8%80%E9%A2%98%E8%AF%A6%E8%A7%A3/"
           data-tag="sql注入"
           data-author="" >
            <span class="post-title" title="Sqli-labs第一题详解">Sqli-labs第一题详解</span>
            <span class="post-date" title="2019-06-10 19:22:43">2019/06/10</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/05/04/CRC%E7%A2%B0%E6%92%9E/"
           data-tag="crc碰撞"
           data-author="" >
            <span class="post-title" title="CRC碰撞">CRC碰撞</span>
            <span class="post-date" title="2019-05-04 20:47:00">2019/05/04</span>
        </a>
        
        <a  class="全部文章 线下赛 "
           href="/2019/05/04/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%9B%A2%E9%98%9F%E5%86%85%E9%83%A8%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="第一次团队线下赛总结">第一次团队线下赛总结</span>
            <span class="post-date" title="2019-05-04 20:46:40">2019/05/04</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/05/04/misc%20%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3/"
           data-tag="暴力破解"
           data-author="" >
            <span class="post-title" title="MISC暴力破解">MISC暴力破解</span>
            <span class="post-date" title="2019-05-04 20:45:54">2019/05/04</span>
        </a>
        
        <a  class="全部文章 Web开发 PHP "
           href="/2019/04/28/PHP%20%E2%80%94%20Cookie%20and%20Session%E7%AF%87/"
           data-tag="PHP"
           data-author="" >
            <span class="post-title" title="PHP — Cookie and Session篇">PHP — Cookie and Session篇</span>
            <span class="post-date" title="2019-04-28 20:28:45">2019/04/28</span>
        </a>
        
        <a  class="全部文章 Web开发 PHP "
           href="/2019/04/21/HTML+MYSQL+PHP%E6%90%AD%E5%BB%BA%E5%B8%A6%E6%9C%89cookie%E7%9A%84%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="HTML+MYSQL+PHP搭建带有cookie的登录页面">HTML+MYSQL+PHP搭建带有cookie的登录页面</span>
            <span class="post-date" title="2019-04-21 12:05:48">2019/04/21</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/04/16/%E5%8F%8C%E5%9B%BE+%E7%9B%B2%E6%B0%B4%E5%8D%B0/"
           data-tag="盲水印"
           data-author="" >
            <span class="post-title" title="双图+盲水印">双图+盲水印</span>
            <span class="post-date" title="2019-04-16 15:41:28">2019/04/16</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/04/15/%E5%93%88%E5%A4%AB%E6%9B%BC%E6%A0%91+%E5%AF%86%E7%A0%81%E9%A2%98+TTL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="哈夫曼树+TTL+密码题">哈夫曼树+TTL+密码题</span>
            <span class="post-date" title="2019-04-15 20:24:29">2019/04/15</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/04/10/LSB%E9%9A%90%E5%86%99+%E7%94%BB%E5%9B%BE/"
           data-tag="LSB"
           data-author="" >
            <span class="post-title" title="LSB隐写+画图">LSB隐写+画图</span>
            <span class="post-date" title="2019-04-10 20:20:41">2019/04/10</span>
        </a>
        
        <a  class="全部文章 Web开发 PHP "
           href="/2019/04/07/PHP%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"
           data-tag="php"
           data-author="" >
            <span class="post-title" title="PHP学习记录">PHP学习记录</span>
            <span class="post-date" title="2019-04-07 20:04:51">2019/04/07</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/04/05/%E5%88%86%E7%A6%BB%E5%9B%BE%E7%89%87%E4%B8%AD%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/"
           data-tag="misc"
           data-author="" >
            <span class="post-title" title="分离图片中的隐藏文件方法总结">分离图片中的隐藏文件方法总结</span>
            <span class="post-date" title="2019-04-05 16:19:56">2019/04/05</span>
        </a>
        
        <a  class="全部文章 Web开发 前端 "
           href="/2019/03/31/CSS%E7%BB%83%E4%B9%A0%E8%AE%B0%E5%BD%95/"
           data-tag="css"
           data-author="" >
            <span class="post-title" title="CSS练习小结">CSS练习小结</span>
            <span class="post-date" title="2019-03-31 18:00:52">2019/03/31</span>
        </a>
        
        <a  class="全部文章 Web开发 前端 "
           href="/2019/03/30/html%E7%BB%83%E4%B9%A0%E8%AE%B0%E5%BD%95/"
           data-tag="html"
           data-author="" >
            <span class="post-title" title="HTML练习记录">HTML练习记录</span>
            <span class="post-date" title="2019-03-30 15:08:19">2019/03/30</span>
        </a>
        
        <a  class="全部文章 CTF MISC "
           href="/2019/03/25/zip%E4%BC%AA%E5%8A%A0%E5%AF%86%E5%81%9A%E6%B3%95%E5%8F%8A%E5%8E%9F%E7%90%86/"
           data-tag="伪加密"
           data-author="" >
            <span class="post-title" title="zip伪加密做法及原理">zip伪加密做法及原理</span>
            <span class="post-date" title="2019-03-25 20:52:13">2019/03/25</span>
        </a>
        
        <a  class="全部文章 Blog搭建 "
           href="/2019/03/22/%E4%BD%BF%E7%94%A8hexo%20%E6%90%AD%E5%BB%BA%20blog%E8%BF%87%E7%A8%8B/"
           data-tag="blog"
           data-author="" >
            <span class="post-title" title="使用hexo搭建blog">使用hexo搭建blog</span>
            <span class="post-date" title="2019-03-22 15:59:36">2019/03/22</span>
        </a>
        
        <a  class="全部文章 数据库 "
           href="/2019/01/27/Mysql%20%E8%AF%AD%E5%8F%A5%E7%BB%83%E4%B9%A0/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="Mysql 语句练习">Mysql 语句练习</span>
            <span class="post-date" title="2019-01-27 12:07:09">2019/01/27</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Java EE——Mybatis 框架学习" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Mybatis框架学习</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Web开发">Web开发</a> > 
            
            <a  data-rel="Web开发&lt;---&gt;JavaEE">JavaEE</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">Mybatis</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2021-03-06 21:55:26'>2021-01-20 22:27</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:12.5k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81MyBatis-%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="toc-text">一、MyBatis 框架概述：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-Mybatis-%E6%A1%86%E6%9E%B6%E5%85%A5%E9%97%A8"><span class="toc-text">二、 Mybatis 框架入门</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81-%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86-Dao-%E5%AE%9E%E7%8E%B0-CRUD-%E6%93%8D%E4%BD%9C"><span class="toc-text">三、 基于代理 Dao 实现 CRUD 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E6%A0%B9%E6%8D%AE-ID-%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-text">1、根据 ID 查询：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E4%BF%9D%E5%AD%98%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-text">2、保存操作：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E7%94%A8%E6%88%B7%E6%9B%B4%E6%96%B0%EF%BC%9A"><span class="toc-text">3、用户更新：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81-%E7%94%A8%E6%88%B7%E5%88%A0%E9%99%A4%EF%BC%9A"><span class="toc-text">4、 用户删除：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Mybatis-%E7%9A%84%E5%8F%82%E6%95%B0%E6%B7%B1%E5%85%A5"><span class="toc-text">四、Mybatis 的参数深入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81Mybatis%E7%9A%84%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E5%B0%81%E8%A3%85"><span class="toc-text">五、Mybatis的输出结果封装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81resultType%E7%9A%84%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-text">1、resultType的配置结果类型：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E3%80%81SqlMapConfig-xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">六、SqlMapConfig.xml配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%83%E3%80%81Mybatis-%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-text">七、Mybatis 连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Mybatis-%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%8A%80%E6%9C%AF%EF%BC%9A"><span class="toc-text">1、Mybatis 的连接池技术：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AB%E3%80%81Mybatis%E7%9A%84%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5"><span class="toc-text">八、Mybatis的动态SQL语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B9%9D%E3%80%81Mybatis%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E4%B8%80%E5%AF%B9%E4%B8%80%EF%BC%88%E5%A4%9A%E5%AF%B9%E4%B8%80%EF%BC%89"><span class="toc-text">九、Mybatis多表查询一对一（多对一）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E3%80%81-Mybatis-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E2%80%94%E2%80%94%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-text">十、 Mybatis 多表查询——多对多</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81-Mybatis-%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E7%AD%96%E7%95%A5"><span class="toc-text">十一、 Mybatis 延迟加载策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81-Mybatis-%E7%BC%93%E5%AD%98"><span class="toc-text">十二、 Mybatis 缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81-Mybatis-%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">十三、 Mybatis 注解开发</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一、MyBatis-框架概述："><a href="#一、MyBatis-框架概述：" class="headerlink" title="一、MyBatis 框架概述："></a>一、MyBatis 框架概述：</h4><p><strong>1、什么是mybatis</strong>：</p>
<ul>
<li><p>mybatis 是一个优秀的基于 java 的持久层框架，它内部封装了 jdbc，使开发者只需要关注 sql 语句本身，而不需要花费精力去处理加载驱动、创建连接、创建 statement 等繁杂的过程。</p>
</li>
<li><p>mybatis 通过 xml 或注解的方式将要执行的各种 statement 配置起来，并通过 java 对象和 statement 中sql 的动态参数进行映射生成最终执行的 sql 语句，最后由 mybatis 框架执行 sql 并将结果映射为 java 对象并返回。</p>
</li>
<li><p>采用 ORM 思想解决了实体和数据库映射的问题，对 jdbc 进行了封装，屏蔽了 jdbc api 底层访问细节，使我们不用与 jdbc api 打交道，就可以完成对数据库的持久化操作。</p>
</li>
</ul>
<p><strong>2、mybatis在三层架构中的位置</strong></p>
<p><img src="http://img-blog.csdnimg.cn/20201009105844161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h4 id="二、-Mybatis-框架入门"><a href="#二、-Mybatis-框架入门" class="headerlink" title="二、 Mybatis 框架入门"></a>二、 Mybatis 框架入门</h4><p><strong>1、基于XML的方式</strong>：</p>
<p>1、创建 maven 工程：<br><img src="http://img-blog.csdnimg.cn/20201011112115858.png" alt="在这里插入图片描述"><br>2、添加 Mybatis的坐标：</p>
<ul>
<li>在 pom.xml 文件中添加 Mybatis3.4.5 的坐标，如下：</li>
</ul>
<pre><code class="xml">&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.4.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.1.6&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j&lt;/artifactId&gt;
            &lt;version&gt;1.2.12&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.10&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre>
<p>3、编写 User 实体类：</p>
<pre><code class="java">public class User implements Serializable &#123;
    private Integer id;
    private String username;
    private Date birthday;
    private String address;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public Date getBirthday() &#123;
        return birthday;
    &#125;

    public void setBirthday(Date birthday) &#123;
        this.birthday = birthday;
    &#125;

    public String getAddress() &#123;
        return address;
    &#125;

    public void setAddress(String address) &#123;
        this.address = address;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;User&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, birthday=&quot; + birthday +
                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;
</code></pre>
<p>4、编写持久层接口 IUserDao：</p>
<pre><code class="java">public interface IUserDao &#123;
    /*
     *查询所有操作
     * */
    List&lt;User&gt; findAll();
&#125;</code></pre>
<p>5、编写持久层接口的映射文件 IUserDao.xml：</p>
<p>注意：</p>
<ul>
<li>创建位置：必须和持久层接口在相同的包中。</li>
<li>名称：必须以持久层接口名称命名文件名，扩展名是.xml</li>
</ul>
<p>例：都是在com.smk.dao包中<br><img src="http://img-blog.csdnimg.cn/2020101111305136.png" alt="在这里插入图片描述"></p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.smk.dao.IUserDao&quot;&gt;
    &lt;select id=&quot;findAll&quot; resultType=&quot;com.smk.domain.User&quot;&gt;
        select * from user
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre>
<p>不要忘记在映射配置中告知mybatis要封装到哪个实体类中。</p>
<p>配置的方式：指定实体类的全限定类名 即：<code>resultType=&quot;com.smk.domain.User&quot;</code></p>
<p>6、 编写 SqlMapConfig.xml 配置文件：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!--mybatis的主配置文件--&gt;
&lt;configuration&gt;
    &lt;!-- 配置环境--&gt;
    &lt;environments default=&quot;mysql&quot;&gt;
        &lt;!-- 配置mysql环境--&gt;
        &lt;environment id=&quot;mysql&quot;&gt;
            &lt;!--配置事物的类型--&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;!--配置数据源/连接池2--&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/my_batis?useUnicode=true&amp;amp;characterEncoding=utf8&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;!--指定映射配置文件的位置，映射配置文件指的是每个dao独立的配置文件--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/smk/dao/IUserDao.xml&quot;&gt;&lt;/mapper&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;</code></pre>
<p>7、编写测试类：</p>
<pre><code class="java">public class mybatis &#123;
    public static void main(String[] args) throws IOException &#123;
        //1.读取配置文件
        InputStream in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
        //2.创建一个SqlsessionFactory工厂
        SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();
        SqlSessionFactory factory = builder.build(in);
        //3.使用工厂生产一个Sqlsession对象
        SqlSession session = factory.openSession();
        //4.使用SqlSession创建Dao接口对象
        IUserDao userDao = session.getMapper(IUserDao.class);
        //5.使用代理对象执行方法
        List&lt;User&gt; users = userDao.findAll();
        for (User user : users) &#123;
            System.out.println(user);
        &#125;
        //6.释放资源
        session.close();
        in.close();
    &#125;
&#125;</code></pre>
<p>在测试类中运行：</p>
<p><img src="http://img-blog.csdnimg.cn/20201011114342875.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<hr>

<p><strong>2、基于注解的方式</strong>：</p>
<p>在基于注解的的方式下就不再需要 IUserDao.xml配置文件，同时需要在SqlMapConfig.xml中的mapper配置时，使用class属性指定dao接口的全限定类名。</p>
<p>1、在持久层接口中添加注解：</p>
<pre><code class="java">public interface IUserDao &#123;
    /*
     *查询所有操作
     * */
    @Select(&quot;select * from user&quot;)
    List&lt;User&gt; findAll();
&#125;</code></pre>
<p>2、修改 SqlMapConfig.xml：</p>
<pre><code class="xml">&lt;mappers&gt;
        &lt;mapper class=&quot;com.smk.dao.IUserDao&quot;&gt;&lt;/mapper&gt;
&lt;/mappers&gt;</code></pre>
<blockquote>
<p>注意：在使用基于注解的 Mybatis 配置时，须移除 xml 的映射配置（IUserDao.xml）。</p>
</blockquote>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201011123940792.png#pic_center" alt="在这里插入图片描述"></p>
<p>补充：</p>
<ul>
<li>不管使用XML还是注解配置， Mybatis是支持写dao实现类的。</li>
<li>但在在实际开发中，都是越简便越好，所以都是采用不写dao实现类的方式。</li>
</ul>
<h4 id="三、-基于代理-Dao-实现-CRUD-操作"><a href="#三、-基于代理-Dao-实现-CRUD-操作" class="headerlink" title="三、 基于代理 Dao 实现 CRUD 操作"></a>三、 基于代理 Dao 实现 CRUD 操作</h4><h5 id="1、根据-ID-查询："><a href="#1、根据-ID-查询：" class="headerlink" title="1、根据 ID 查询："></a>1、根据 ID 查询：</h5><p>步骤：</p>
<p>1、在持久层接口中添加 findById 方法：</p>
<pre><code class="java">public interface IUserDao &#123;
    //根据 id 查询
    User findById (Integer userId);
&#125;</code></pre>
<p>2、配置映射文件：</p>
<pre><code class="java">&lt;mapper namespace=&quot;com.smk.dao.IUserDao&quot;&gt;
    &lt;select id=&quot;findById&quot; resultType=&quot;com.smk.domain.User&quot; parameterType=&quot;int&quot;&gt;
        select * from user where id= #&#123;id&#125;
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre>
<p><strong>解释</strong>：</p>
<ul>
<li>resultType 属性：用于指定结果集的类型。</li>
<li>parameterType 属性：用于指定传入参数的类型。</li>
<li>sql 语句中使用<code>#&#123;&#125;</code>字符：它代表占位符，相当于原来 jdbc 部分所学的，都是用于执行语句时替换实际的数据。具体的数据是由<code>#&#123;&#125;</code>里面的内容决定的。</li>
<li><code>#&#123;&#125;</code>中内容的写法：由于数据类型是基本类型，所以此处可以随意写。</li>
</ul>
<p>3、 在测试类添加测试：</p>
<pre><code class="java">public class mybatis &#123;
    private InputStream in;
    private SqlSessionFactory factory;
    private SqlSession session;
    private IUserDao userDao;

    @Test
    public void testFindOne() &#123;
        //6.执行操作
        User user = userDao.findById(41);
        System.out.println(user);
    &#125;

    @Before//在测试方法执行之前执行
    public void init() throws Exception &#123;
        //1.读取配置文件
        in = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);
        //2.创建构建者对象
        SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();
        //3.创建 SqlSession 工厂对象
        factory = builder.build(in);
        //4.创建 SqlSession 对象
        session = factory.openSession();
        //5.创建 Dao 的代理对象
        userDao = session.getMapper(IUserDao.class);
    &#125;

    @After//在测试方法执行完成之后执行
    public void destroy() throws Exception &#123;
        session.commit();//提交事务；在增删改时需要提交，查询时不需要。
        //7.释放资源
        session.close();
        in.close();
    &#125;
&#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201011203422131.png#pic_center" alt="在这里插入图片描述"></p>
<h5 id="2、保存操作："><a href="#2、保存操作：" class="headerlink" title="2、保存操作："></a>2、保存操作：</h5><p>同样的套路</p>
<p><strong>1、在持久层接口中添加新增方法</strong>：</p>
<pre><code class="java">  // 保存用户
  int saveUser(User user);</code></pre>
<p><strong>2、配置映射文件</strong>：</p>
<pre><code class="java">&lt;insert id=&quot;saveUser&quot; parameterType=&quot;com.smk.domain.User&quot;&gt;
        insert into user(username,birthday,sex,address) value (#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)
&lt;/insert&gt;</code></pre>
<p>解释：</p>
<p> <code>#&#123;&#125;</code>中内容的写法：</p>
<ul>
<li>由于保存方法的参数是 一个 User 对象，此处要写 User 对象中的属性名称。<br>它用的是 ognl 表达式。</li>
</ul>
<p>ognl 表达式：</p>
<ul>
<li><p>它是 apache 提供的一种表达式语言，全称是：Object Graphic Navigation Language 对象图导航语言，它是按照一定的语法格式来获取数据的。语法格式就是使用 <code>#&#123;对象.对象&#125;</code> 的方式。</p>
</li>
<li><p><code>#&#123;user.username&#125;</code> 它会先去找 user 对象，然后在 user 对象中找到 username 属性，并调用 getUsername() 方法把值取出来。但是我们在 parameterType 属性上指定了实体类名称，所以可以省略 user 而直接写 username。</p>
</li>
</ul>
<p><strong>3、测试</strong>：</p>
<pre><code class="java"> @Test
    public void testSave() &#123;
        User user = new User();
        user.setUsername(&quot;modify User property&quot;);
        user.setAddress(&quot;北京市顺义区&quot;);
        user.setSex(&quot;男&quot;);
        user.setBirthday(new Date());
        System.out.println(&quot;保存操作之前：&quot; + user);
        //5.执行保存方法
        userDao.saveUser(user);
        System.out.println(&quot;保存操作之后：&quot; + user);
    &#125;</code></pre>
<p><strong>注意</strong>：</p>
<p>在实现 <strong>增删改</strong> 时需要进行控制事务的提交。</p>
<p>如何在mybatis 中如何控制事务提交？</p>
<ul>
<li>可以使用：<code>session.commit();</code> 来实现事务提交。加入事务提交后的代码如下：</li>
</ul>
<pre><code class="java">@After//在测试方法执行完成之后执行
public void destroy() throws Exception&#123;
    session.commit();

    //7.释放资源
    session.close();
    in.close();
&#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201011224511758.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><img src="http://img-blog.csdnimg.cn/20201011224811344.png" alt="在这里插入图片描述"><br><strong>问题扩展：获取新增用户 id 的返回值</strong>：</p>
<p>新增用户后，同时还要返回当前新增用户的 id 值，因为 id 是由数据库的自动增长来实现的，所以就相当于我们要在新增后将自动增长 auto_increment 的值返回。</p>
<pre><code class="java">    &lt;insert id=&quot;saveUser&quot; parameterType=&quot;com.smk.domain.User&quot;&gt;
        &lt;!-- 配置保存时获取插入的id   keypreperty：代表要返回的值对应实体类里的字段 ，keyColumn代表数据库的字段名--&gt;
        &lt;selectKey keyProperty=&quot;id&quot; keyColumn=&quot;id&quot; resultType=&quot;int&quot;&gt;
            select last_insert_id();
        &lt;/selectKey&gt;
        insert into user(username,birthday,sex,address) value (#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)
    &lt;/insert&gt;</code></pre>
<p>再次执行测试：</p>
<p><img src="http://img-blog.csdnimg.cn/20201012210239364.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到 id 的值已经获取到了。</p>
<h5 id="3、用户更新："><a href="#3、用户更新：" class="headerlink" title="3、用户更新："></a>3、用户更新：</h5><p>1、在持久层接口中添加更新方法：</p>
<pre><code class="java"> //更新用户
    int updateUser(User user);</code></pre>
<p>2、配置映射文件：</p>
<pre><code class="java">    &lt;update id=&quot;updateUser&quot; parameterType=&quot;com.smk.domain.User&quot;&gt;
        update user set username=#&#123;username&#125;,birthday=#&#123;birthday&#125;,sex=#&#123;sex&#125;, address=#&#123;address&#125; where id=#&#123;id&#125;
    &lt;/update&gt;</code></pre>
<p>3、更新的测试方法：</p>
<pre><code class="java"> @Test
    public void testUpdateUser() throws Exception &#123;
        //1.根据 id 查询
        User user = userDao.findById(52);
        //2.更新操作
        user.setAddress(&quot;北京市顺义区&quot;);
        int res = userDao.updateUser(user);
        System.out.println(res);
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201011232354868.png#pic_center" alt="在这里插入图片描述"></p>
<h5 id="4、-用户删除："><a href="#4、-用户删除：" class="headerlink" title="4、 用户删除："></a>4、 用户删除：</h5><p>1、在持久层接口中添加删除方法：</p>
<pre><code class="java"> //删除用户
    int deleteUser(int uid);</code></pre>
<p>2、配置映射文件：</p>
<pre><code class="java">&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;int&quot;&gt;
        delete from user where id=#&#123;uid&#125;
&lt;/delete&gt;</code></pre>
<p>3、删除的测试方法：</p>
<pre><code class="java">@Test
    public void testdeleteUser()&#123;
        int res = userDao.deleteUser(52);
        System.out.println(res);
    &#125;</code></pre>
<p>至此基于mybatis的增删改查就完成了。<hr></p>
<h4 id="四、Mybatis-的参数深入"><a href="#四、Mybatis-的参数深入" class="headerlink" title="四、Mybatis 的参数深入"></a>四、Mybatis 的参数深入</h4><p>注：Mybatis使用ognl表达式解析对象字段的值，<code>#&#123;&#125;</code>或<code>$&#123;&#125;</code>括号中的值为pojo属性名称。</p>
<p><strong>什么是ognl</strong>：</p>
<p>Object Graphic Navigation Language<br>&nbsp;&nbsp;对象    &nbsp;&nbsp;&nbsp;&nbsp;图&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;导航    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;语言</p>
<p>它是通过对象的取值方法来获取数据。在写法上把get给省略了。</p>
<p> 比如：我们获取用户的名称</p>
<ul>
<li> 类中的写法：user.getUsername()</li>
<li>OGNL表达式写法：user.username</li>
</ul>
<p>mybatis中为什么能直接写username，而不用<code>user.</code>呢？</p>
<ul>
<li>因为在parameterType中已经提供了属性所属的类，所以此时不需要写对象名。<hr>
</li>
</ul>
<p> <strong>1、parameterType 配置参数</strong>：</p>
<p> SQL 语句的传参是通过使用标签的 parameterType 属性来设定。该属性的取值可以是基本类型，引用类型（例如:String 类型），还可以是实体类类型（POJO 类）。同时也可以使用实体类的包装类。</p>
<p><strong>2、传递 pojo 包装对象</strong>：</p>
<p>开发中通过 pojo 传递查询条件 。当查询条件是综合的查询条件：不仅包括用户查询条件还包括其它的查询条件（比如将用户购买商品信息也作为查询条件），这时可以使用包装对象传递输入参数。即：<font color = red> Pojo 类中包含 pojo</font> 。</p>
<p>例：</p>
<p>需求：根据用户名查询用户信息，查询条件放到 QueryVo 的 user 属性中。</p>
<p>1、编写 QueryVo：</p>
<pre><code class="java">public class QueryVo &#123;
    private User user;

    public User getUser() &#123;
        return user;
    &#125;

    public void setUser(User user) &#123;
        this.user = user;
    &#125;
&#125;</code></pre>
<p>2、编写持久层接口：</p>
<pre><code class="java">    //根据 QueryVo 中的条件查询用户
    List&lt;User&gt; findByVo(QueryVo vo);</code></pre>
<p>3、配置映射文件：</p>
<pre><code class="java">    &lt;!-- 根据用户名称模糊查询，参数变成一个 QueryVo 对象了 --&gt;
    &lt;select id=&quot;findByVo&quot; resultType=&quot;com.smk.domain.User&quot; parameterType=&quot;com.smk.domain.QueryVo&quot;&gt;
        select * from user where username like #&#123;user.username&#125;;
    &lt;/select&gt;</code></pre>
<p>4、添加测试类：</p>
<pre><code class="java">    @Test
    public void testFindByQueryVo() &#123;
        QueryVo vo = new QueryVo();
        User user = new User();
        user.setUsername(&quot;%王%&quot;);
        vo.setUser(user);
        List&lt;User&gt; users = userDao.findByVo(vo);
        for (User u : users) &#123;
            System.out.println(u);
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201014223858731.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="五、Mybatis的输出结果封装"><a href="#五、Mybatis的输出结果封装" class="headerlink" title="五、Mybatis的输出结果封装"></a>五、Mybatis的输出结果封装</h4><h5 id="1、resultType的配置结果类型："><a href="#1、resultType的配置结果类型：" class="headerlink" title="1、resultType的配置结果类型："></a>1、resultType的配置结果类型：</h5><p> resultType 属性可以指定结果集的类型，它支持基本数据类型和实体类数据类型。</p>
<p> 它和 parameterType 一样，如果注册过类型别名的，可以直接使用别名。</p>
<p> 没有注册过的必须使用全限定类名。</p>
<p>例如：我们的实体类此时必须是全限定类名，同时，当是实体类名称时，实体类中的属性名称必须和查询语句中的列名（即数据库里的表名列名）保持一致，否则无法实现封装。</p>
<p><strong>特殊情况示例</strong>：</p>
<p>当实体类属性和数据库表的列名已经不一致时</p>
<p>1、实体类代码：</p>
<pre><code class="java">public class User2 &#123;
    public class User implements Serializable &#123;
        private Integer userId;
        private String userName;
        private Date userBirthday;
        private String userSex;
        private String userAddress;

        public Integer getUserId() &#123;
            return userId;
        &#125;

        public void setUserId(Integer userId) &#123;
            this.userId = userId;
        &#125;

        public String getUserName() &#123;
            return userName;
        &#125;

        public void setUserName(String userName) &#123;
            this.userName = userName;
        &#125;

        public Date getUserBirthday() &#123;
            return userBirthday;
        &#125;

        public void setUserBirthday(Date userBirthday) &#123;
            this.userBirthday = userBirthday;
        &#125;

        public String getUserSex() &#123;
            return userSex;
        &#125;

        public void setUserSex(String userSex) &#123;
            this.userSex = userSex;
        &#125;

        public String getUserAddress() &#123;
            return userAddress;
        &#125;

        public void setUserAddress(String userAddress) &#123;
            this.userAddress = userAddress;
        &#125;

        @Override
        public String toString() &#123;
            return &quot;User [userId=&quot; + userId + &quot;, userName=&quot; + userName + &quot;, userBirthday=&quot;
                    + userBirthday + &quot;, userSex=&quot;
                    + userSex + &quot;, userAddress=&quot; + userAddress + &quot;]&quot;;
        &#125;
    &#125;

&#125;</code></pre>
<p>2、映射配置：</p>
<pre><code class="java">   // 查询所有用户
    List&lt;User&gt; findAll();</code></pre>
<p>3、测试查询结果：</p>
<pre><code class="java">    @Test
    public void testFindAll() &#123;
        List&lt;User2&gt; users = userDao.findAll();
        for (User2 user : users) &#123;
            System.out.println(user);
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201106204232953.png#pic_center" alt="在这里插入图片描述"><br>为什么名称会有值呢？</p>
<p>因为：mysql 在 windows 系统中不区分大小写！</p>
<p><strong>应对措施</strong>：</p>
<ol>
<li>使用别名查询：</li>
<li>使用resultMap 结果类型封装</li>
</ol>
<p><strong>1、使用别名查询</strong>：</p>
<p>即给实体类的属性名起对应数据的字段值别名</p>
<p><img src="http://img-blog.csdnimg.cn/20201107113557449.png#pic_center" alt="在这里插入图片描述"></p>
<p><strong>2、resultMap 结果类型</strong>：</p>
<p>resultMap 标签可以建立查询的列名和实体类的属性名称不一致时建立对应关系。从而实现封装。</p>
<p>在 select 标签中使用 resultMap 属性指定引用即可。同时 resultMap 可以实现将查询结果映射为复杂类型的 pojo，比如在查询结果映射对象中包括 pojo 和 list 实现一对一查询和一对多查询。</p>
<p><strong>实现步骤</strong>：</p>
<p> 1、定义 resultMap：</p>
<pre><code class="xml"> &lt;!-- 建立 Use实体和数据库表的对应关系
    type属性：指定实体类的全限定类名
    id 属性：给定一个唯一标识，是给查询 select 标签引用用的
    --&gt;
    &lt;resultMap type=&quot;com.smk.domain.User2&quot; id=&quot;userMap&quot;&gt;

        &lt;id column=&quot;id&quot; property=&quot;userId&quot;/&gt;
        &lt;result column=&quot;username&quot; property=&quot;userName&quot;/&gt;
        &lt;result column=&quot;sex&quot; property=&quot;userSex&quot;/&gt;
        &lt;result column=&quot;address&quot; property=&quot;userAddress&quot;/&gt;
        &lt;result column=&quot;birthday&quot; property=&quot;userBirthday&quot;/&gt;

    &lt;/resultMap&gt;</code></pre>
<ul>
<li><p>id 标签：用于指定主键字段</p>
</li>
<li><p>result 标签：用于指定非主键字段</p>
</li>
<li><p>column 属性：用于指定数据库列名</p>
</li>
<li><p>property 属性：用于指定实体类属性名称</p>
<p>2、映射配置：</p>
</li>
</ul>
<pre><code class="java">    &lt;!-- 配置查询所有操作 --&gt;
    &lt;select id=&quot;findAll&quot; resultMap=&quot;userMap&quot;&gt;
       select * from user
    &lt;/select&gt;</code></pre>
<p>3、测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201106210506605.png#pic_center" alt="在这里插入图片描述"><br>可以看到查询正常了。</p>
<h4 id="六、SqlMapConfig-xml配置文件"><a href="#六、SqlMapConfig-xml配置文件" class="headerlink" title="六、SqlMapConfig.xml配置文件"></a>六、SqlMapConfig.xml配置文件</h4><p><strong>1、properties（属性）</strong>：</p>
<p>在使用 properties 标签配置时，我们可以采用两种方式指定属性配置。</p>
<p>1、第一种  ：</p>
<pre><code class="xml">    &lt;properties&gt;
        &lt;property name=&quot;jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
        &lt;property name=&quot;jdbc.url&quot;
                  value=&quot;jdbc:mysql://localhost:3306/my_batis?useUnicode=true&amp;amp;characterEncoding=utf8&quot;/&gt;
        &lt;property name=&quot;jdbc.username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;jdbc.password&quot; value=&quot;&quot;/&gt;
    &lt;/properties&gt;</code></pre>
<p>2、第二种   ：</p>
<p> 在 classpath (类路径，resources目录即为根 类路径) 下定义 db.properties 文件<br><img src="http://img-blog.csdnimg.cn/20201107144401778.png" alt="在这里插入图片描述"></p>
<p>db.properties 文件内容：</p>
<pre><code class="java">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/my_batis?useUnicode=true&amp;characterEncoding=utf8
jdbc.username=root
jdbc.password=</code></pre>
<p>注意：db.properties 文件中 数据库连接，指定编码格式不能用 <code>&amp;amp;</code> 需改为 <code>&amp;</code></p>
<p>配置信息：</p>
<pre><code class="xml"> &lt;properties resource=&quot;db.properties&quot;&gt; &lt;/properties&gt;</code></pre>
<p>此时我们的 dataSource 标签就变成了引用上面的配置：</p>
<pre><code class="xml">      &lt;!--配置数据源/连接池--&gt;
    &lt;dataSource type=&quot;POOLED&quot;&gt;
        &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;
        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;
        &lt;property name=&quot;username&quot; value=&quot;&#123;$jdbc.username&#125;&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;
    &lt;/dataSource&gt;</code></pre>
<p><strong>2、typeAliases（类型别名）</strong>：、</p>
<p>自定义别名：</p>
<p>在 SqlMapConfig.xml 中配置：</p>
<pre><code class="xml">&lt;typeAliases&gt;
&lt;!-- 单个别名定义 --&gt;
&lt;typeAlias type=&quot;com.itheima.domain.User&quot; alias=&quot;user&quot;/&gt;

&lt;!-- 批量别名定义，扫描整个包下的类，别名为类名（首字母大写或小写都可以）--&gt;
&lt;package name=&quot;com.smk.domain&quot;/&gt;
&lt;package name=&quot;其它包&quot;/&gt;
&lt;/typeAliases&gt;</code></pre>
<p><strong>3、mappers（映射器）</strong>：</p>
<p><code>&lt;mapper resource=&quot; &quot;/&gt;</code> 使用相对于类路径的资源，如：</p>
<pre><code class="java">&lt;mapper resource=&quot;com/smk/dao/IUserDao.xml&quot; /&gt;</code></pre>
<p><code>&lt;mapper class=&quot; &quot;/&gt;</code> 使用 mapper 接口类路径，如：</p>
<pre><code class="java">&lt;mapper class=&quot;com.smk.dao.UserDao&quot;/&gt;</code></pre>
<p>package 标签是用于指定dao接口所在的<strong>包</strong>，当指定了之后，就不需要再写 mapper标签以及 resource 或者 class 了</p>
<p>在 SqlMapConfig.xml 中配置：</p>
<p><code> &lt;package name=&quot;&quot;/&gt;</code> 注册指定包下的所有 mapper 接口，如：</p>
<pre><code class="java">&lt;mappers&gt;
     &lt;package name=&quot;com.smk.dao&quot;/&gt;
&lt;/mappers&gt;</code></pre>
<p>注意：此种方法要求 mapper 接口名称和 mapper 映射文件名称相同，且放在同一个目录中。<br><img src="http://img-blog.csdnimg.cn/2020110715394491.png" alt="在这里插入图片描述"></p>
<h4 id="七、Mybatis-连接池"><a href="#七、Mybatis-连接池" class="headerlink" title="七、Mybatis 连接池"></a>七、Mybatis 连接池</h4><h5 id="1、Mybatis-的连接池技术："><a href="#1、Mybatis-的连接池技术：" class="headerlink" title="1、Mybatis 的连接池技术："></a>1、Mybatis 的连接池技术：</h5><p> 在 web 开发中，常使用连接池技术来减少我们获取连接所消耗的时间；在 Mybatis 中也有连接池技术，但是它采用的是自己的连接池技术。在 Mybatis 的 SqlMapConfig.xml 配置文件中，通过 <code>&lt;dataSource type = &quot;&quot;&gt;</code> 来实现 Mybatis 中连接池的配置。</p>
<p><strong>1.1、Mybatis 连接池的分类</strong>：</p>
<p>mybatis连接池提供了3种方式的配置：</p>
<p>配置的位置：</p>
<ul>
<li>主配置文件SqlMapConfig.xml中的dataSource标签，type属性就是表示采用何种连接池方式。</li>
</ul>
<p>type属性的取值：</p>
<ul>
<li>POOLED     使用连接池的数据源</li>
<li>UNPOOLED 不使用连接池的数据源</li>
<li>JNDI     使用 JNDI 实现的数据源</li>
</ul>
<p>具体结构如下：<br><img src="http://img-blog.csdnimg.cn/20201108181835759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>相应地，MyBatis 内部分别定义了实现了 java.sql.DataSource 接口的 UnpooledDataSource，PooledDataSource 类来表示 UNPOOLED、POOLED 类型的数据源。</p>
<p><strong>1.2、Mybatis 中数据源的配置</strong>：</p>
<p>在SqlMapConfig.xml 进行配置</p>
<pre><code class="xml">&lt;dataSource type=&quot;POOLED&quot;&gt;
    &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;
&lt;/dataSource&gt;</code></pre>
<p>Mybatis 在初始化时，根据<code>&lt;dataSource&gt;</code>的 type 属性来创建相应类型的的数据源 DataSource，即：</p>
<ul>
<li>type=” POOLED “：MyBatis 会创建 PooledDataSource 实例。</li>
<li>type=” UNPOOLED “： MyBatis 会创建 UnpooledDataSource 实例。</li>
<li>type=” JNDI “：MyBatis 会从 JNDI 服务上查找 DataSource 实例，然后返回使用。</li>
</ul>
<h4 id="八、Mybatis的动态SQL语句"><a href="#八、Mybatis的动态SQL语句" class="headerlink" title="八、Mybatis的动态SQL语句"></a>八、Mybatis的动态SQL语句</h4><p><strong>1、动态sql之<code>&lt;if&gt;</code>标签</strong>：</p>
<ul>
<li>根据实体类的不同取值，使用不同的 SQL 语句来进行查询。比如在 id 如果不为空时可以根据 id 查询，如果 username 不为空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常会碰到。</li>
</ul>
<p>1、持久层 Dao 接口：</p>
<pre><code class="java">    //根据用户信息，查询用户列表
    List&lt;User&gt; findByUser(User user);</code></pre>
<p>2、持久层 Dao 映射配置：</p>
<pre><code class="java">    &lt;select id=&quot;findByUser&quot; resultMap=&quot;userMap&quot; parameterType=&quot;user&quot;&gt;
        select * from user where 1=1
        &lt;if test=&quot;userName!=null and userName != &#39;&#39; &quot;&gt;
            and username like #&#123;userName&#125;
        &lt;/if&gt;

        &lt;if test=&quot;userAddress != null&quot;&gt;
            or address like #&#123;userAddress&#125;
        &lt;/if&gt;
    &lt;/select&gt;</code></pre>
<p>注：where 1=1 是为了避免 where 关键字后面的第一个词直接就是 “ and “ 而导致语法错误。</p>
<p>3、 测试：</p>
<pre><code class="java"> @Test
    public void testFindByUser() &#123;
        User u = new User();
        u.setUserName(&quot;%王%&quot;);
        u.setUserAddress(&quot;%顺义%&quot;);
        //6.执行操作
        List&lt;User&gt; users = userDao.findByUser(u);
        for (User user : users) &#123;
            System.out.println(user);
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201109233820528.png#pic_center" alt="在这里插入图片描述"><br>可以看到，带 “王” 的用户和地址带 “顺义” 的用户信息全查询出来了。</p>
<p><strong>2、动态sql 之 <code>&lt;where&gt;</code>标签</strong>： </p>
<p>为了简化上面 where 1=1 的条件拼装，可以采用 <code>&lt;where&gt;</code> 标签来简化开发。</p>
<p>1、持久层 Dao 映射配置:</p>
<pre><code class="java">    &lt;select id=&quot;findByUser&quot; resultMap=&quot;userMap&quot; parameterType=&quot;user&quot;&gt;
        select * from user
        &lt;where&gt;
            &lt;if test=&quot;userName!=null and userName != &#39;&#39; &quot;&gt;
                and username like #&#123;userName&#125;
            &lt;/if&gt;
            &lt;if test=&quot;userAddress != null&quot;&gt;
                or address like #&#123;userAddress&#125;
            &lt;/if&gt;
        &lt;/where&gt;
    &lt;/select&gt;</code></pre>
<p><strong>3、动态标签之<code>&lt;foreach&gt;</code>标签</strong>：</p>
<p>在进行范围查询时，就要将一个集合中的值，作为参数动态添加进来。<br>这样将如何进行参数的传递？</p>
<p>1、在 QueryVo 中加入一个 List 集合用于封装参数：</p>
<pre><code class="java">public class QueryVo &#123;

    private User user;
    private List&lt;Integer&gt; ids;

    public List&lt;Integer&gt; getIds() &#123;
        return ids;
    &#125;

    public void setIds(List&lt;Integer&gt; ids) &#123;
        this.ids = ids;
    &#125;

    public User getUser() &#123;
        return user;
    &#125;

    public void setUser(User user) &#123;
        this.user = user;
    &#125;

&#125;</code></pre>
<p>2、持久层 Dao 接口：</p>
<pre><code class="java">    // 根据 id 集合查询用户
    List&lt;User&gt; findInIds(QueryVo vo);</code></pre>
<p>3、持久层 Dao 映射配置：</p>
<pre><code class="java">    &lt;select id=&quot;findInIds&quot; resultMap=&quot;userMap&quot; parameterType=&quot;queryVo&quot;&gt;
        select * from user
        &lt;where&gt;
            &lt;if test=&#39;ids !=null and ids.size&gt;0&#39;&gt;
                &lt;foreach collection=&quot;ids&quot; open=&quot;id in (&quot; close=&quot;)&quot; item=&quot;id&quot; separator=&quot;,&quot;&gt;
                    #&#123;id&#125;
                &lt;/foreach&gt;
            &lt;/if&gt;
        &lt;/where&gt;
    &lt;/select&gt;</code></pre>
<p>SQL 语句：</p>
<ul>
<li>select 字段 from user where id in (?)</li>
</ul>
<p><code>&lt;foreach&gt;</code> 标签用于遍历集合，它的属性：</p>
<ul>
<li>collection:代表要遍历的集合元素，注意编写时不要写#{}</li>
<li>open：代表语句的开始部分</li>
<li>close：代表结束部分</li>
</ul>
<p>4、 测试：</p>
<pre><code class="java">    @Test
    public void testFindInIds() &#123;
        QueryVo vo = new QueryVo();
        List&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;();
        ids.add(41);
        ids.add(42);
        ids.add(43);
        ids.add(46);
        ids.add(57);
        vo.setIds(ids);
        //6.执行操作
        List&lt;User&gt; users = userDao.findInIds(vo);
        for (User user : users) &#123;
            System.out.println(user);
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201110204140134.png#pic_center" alt="在这里插入图片描述"></p>
<p><strong>4、Mybatis 中简化编写的 sql 片段</strong>：</p>
<p>Sql 中可将重复的 sql语句 提取出来，使用时用 include 引用即可，最终达到 sql 重用的目的。</p>
<p>1、定义代码片段：</p>
<pre><code class="xml">    &lt;!-- 抽取重复的语句代码片段 --&gt;
    &lt;sql id=&quot;defaultSql&quot;&gt;
        select * from user
    &lt;/sql&gt;</code></pre>
<p>2、引用代码片段：</p>
<pre><code class="xml">    &lt;!-- 配置查询所有操作 --&gt;
    &lt;select id=&quot;findAll&quot; resultType=&quot;user&quot;&gt;
        &lt;include refid=&quot;defaultSql&quot;&gt;&lt;/include&gt;
    &lt;/select&gt;

    &lt;!-- 根据 id 查询 --&gt;
    &lt;select id=&quot;findById&quot; resultType=&quot;UsEr&quot; parameterType=&quot;int&quot;&gt;
        &lt;include refid=&quot;defaultSql&quot;&gt;&lt;/include&gt;
        where id = #&#123;uid&#125;
    &lt;/select&gt;</code></pre>
<h4 id="九、Mybatis多表查询一对一（多对一）"><a href="#九、Mybatis多表查询一对一（多对一）" class="headerlink" title="九、Mybatis多表查询一对一（多对一）"></a>九、Mybatis多表查询一对一（多对一）</h4><p>**1、一对一查询(多对一)**：</p>
<p>以最为简单的用户和账户的模型来分析 Mybatis 多表关系。用户为 User 表，账户为Account表。<br>一个用户（User）可以有一个或多个账户（Account）。</p>
<p><strong>需求</strong>：</p>
<p>查询所有账户信息，关联查询下单用户信息（只要用户名和地址）。</p>
<p><strong>注意</strong>：</p>
<p>因为一个账户信息只能供某一个用户使用，所以从查询账户信息出发，关联查询用户信息为一对一查询。如果从用户信息出发，查询用户下的账户信息则为一对多查询，因为一个用户可以有多个账户。</p>
<p><strong>方式一</strong>：</p>
<p>1、定义账户信息的实体类：</p>
<pre><code class="java">public class Account implements Serializable &#123;
    private Integer id;
    private Integer uid;
    private Double money;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public Integer getUid() &#123;
        return uid;
    &#125;

    public void setUid(Integer uid) &#123;
        this.uid = uid;
    &#125;

    public Double getMoney() &#123;
        return money;
    &#125;

    public void setMoney(Double money) &#123;
        this.money = money;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;Account&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, uid=&quot; + uid +
                &quot;, money=&quot; + money +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>2、定义 AccountUser 类：</p>
<p>为了能够封装上面 SQL 语句的查询结果，定义 AccountCustomer 类中要包含账户信息同时还要包含用户信息，所以在定义 AccountUser 类时可以继承 User 类。</p>
<pre><code class="java">public class AccountUser extends Account implements Serializable &#123;
    private String username;
    private String address;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public String getAddress() &#123;
        return address;
    &#125;

    public void setAddress(String address) &#123;
        this.address = address;
    &#125;

    @Override
    public String toString() &#123;
        return super.toString() + &quot;      AccountUser&#123;&quot; +
                &quot;username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>3、定义持久层 Dao 接口：</p>
<pre><code class="java">    /**
     * 查询所有用户，带有用户名和地址信息
     * @return
     */
    List&lt;AccountUser&gt; findAllAccount();</code></pre>
<p>4、定义 IAccountDao.xml 文件中的查询配置信息：</p>
<pre><code class="xml">    &lt;!--查询所有账户同是包含用户名和地址信息--&gt;
    &lt;select id=&quot;findAllAccount&quot; resultType=&quot;accountuser&quot;&gt;
      select a.*,u.username,u.address from account a,user u where a.uid =u.id;
    &lt;/select&gt;</code></pre>
<p>5、创建 AccountTest 测试类：</p>
<pre><code class="java">    @Test
    public void testFindAllAccount() &#123;
        List&lt;AccountUser&gt; aus = accountDao.findAllAccount();
        for (AccountUser au : aus) &#123;
            System.out.println(au);
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201112163952263.png#pic_center" alt="在这里插入图片描述"></p>
<p>小结：</p>
<p>定义专门的 po 类作为输出类型，其中定义了 sql 查询结果集所有的字段。此方法较为简单，企业中使用普遍。</p>
<p>po: (persistant object）持久对象，可以看成是与数据库中的表相映射的java对象。</p>
<p><strong>方式二</strong>：</p>
<p>使用 resultMap，定义专门的 resultMap 用于映射一对一查询结果。</p>
<p>我们可以在 Account 类中加入一个 User 类的对象来代表这个账户是哪个用户的。</p>
<p>1、在 Account 类中加入 User 类的对象作为 Account 类的一个属性：</p>
<pre><code class="java">public class Account implements Serializable &#123;
    private Integer id;
    private Integer uid;
    private Double money;

    private User user;

    public User getUser() &#123;
        return user;
    &#125;

    public void setUser(User user) &#123;
        this.user = user;
    &#125;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public Integer getUid() &#123;
        return uid;
    &#125;

    public void setUid(Integer uid) &#123;
        this.uid = uid;
    &#125;

    public Double getMoney() &#123;
        return money;
    &#125;

    public void setMoney(Double money) &#123;
        this.money = money;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;Account&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, uid=&quot; + uid +
                &quot;, money=&quot; + money +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>2、修改 AccountDao 接口中的方法：</p>
<pre><code class="java">   List&lt;Account&gt; findAllAccount();</code></pre>
<p>把 AccountUser 改为 Account</p>
<p>3、重新定义 AccountDao.xml 文件：</p>
<pre><code class="xml">&lt;!-- 建立对应关系 --&gt;
    &lt;resultMap type=&quot;account&quot; id=&quot;accountMap&quot;&gt;
        &lt;id column=&quot;aid&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;uid&quot; property=&quot;uid&quot;/&gt;
        &lt;result column=&quot;money&quot; property=&quot;money&quot;/&gt;

        &lt;!-- 它是用于指定 从表 方的引用实体属性的 --&gt;
        &lt;association property=&quot;user&quot; javaType=&quot;user&quot;&gt;
            &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
            &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
            &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;
            &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;/&gt;
            &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;

    &lt;select id=&quot;findAllAccount&quot; resultMap=&quot;accountMap&quot;&gt;
      select u.*,a.id as aid,a.uid,a.money from account a,user u where a.uid =u.id;
    &lt;/select&gt;</code></pre>
<p>注：</p>
<ul>
<li>a.id as aid ：这里两个表的字段重复了所以需要起别名。</li>
<li>javaType=” user “：即指定数据类型为user类，全限定类名或者别名（此处为别名）。</li>
</ul>
<p>4、加入测试方法：</p>
<pre><code class="java">    @Test
    public void testFindAllAccount() &#123;
        List&lt;Account&gt; accounts = accountDao.findAllAccount();
        for (Account account : accounts) &#123;
            System.out.println(account);
            System.out.println(account.getUser());
        &#125;
    &#125;</code></pre>
<p>测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201112174242274.png#pic_center" alt="在这里插入图片描述"><br><strong>2、 一对多查询</strong>：</p>
<p>需求：</p>
<ul>
<li>查询所有用户信息及用户关联的账户信息。</li>
</ul>
<p>分析：</p>
<ul>
<li>用户信息和他的账户信息为一对多关系，并且查询过程中如果用户没有账户信息，此时也要将用户信息查询出来，此时应该使用左外连接查询比较合适。</li>
</ul>
<p>1、User 类加入 List <code>&lt;Account&gt;</code>：</p>
<pre><code class="java">public class User implements Serializable &#123;

    private Integer Id;
    private String username;
    private String Address;
    private String Sex;
    private Date Birthday;

    private List&lt;Account&gt; accounts;

    public List&lt;Account&gt; getAccounts() &#123;
        return accounts;
    &#125;

    public void setAccounts(List&lt;Account&gt; accounts) &#123;
        this.accounts = accounts;
    &#125;

    public Integer getId() &#123;
        return Id;
    &#125;

    public void setId(Integer Id) &#123;
        this.Id = Id;
    &#125;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public String getAddress() &#123;
        return Address;
    &#125;

    public void setAddress(String address) &#123;
        Address = address;
    &#125;

    public String getSex() &#123;
        return Sex;
    &#125;

    public void setSex(String sex) &#123;
        Sex = sex;
    &#125;

    public Date getBirthday() &#123;
        return Birthday;
    &#125;

    public void setBirthday(Date birthday) &#123;
        Birthday = birthday;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;User&#123;&quot; +
                &quot;Id=&quot; + Id +
                &quot;, username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, Address=&#39;&quot; + Address + &#39;\&#39;&#39; +
                &quot;, Sex=&#39;&quot; + Sex + &#39;\&#39;&#39; +
                &quot;, Birthday=&quot; + Birthday +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>2、 Dao 接口中加入查询方法：</p>
<pre><code class="java">    List&lt;User&gt; findAll();</code></pre>
<p>3、Dao 映射文件配置：</p>
<pre><code class="xml">    &lt;resultMap type=&quot;user&quot; id=&quot;userMap&quot;&gt;
        &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;
        &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
        &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;
        &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;
        &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;/&gt;
        &lt;!-- collection 是用于建立一对多中集合属性的对应关系
        ofType 用于指定集合元素的数据类型
        --&gt;
        &lt;collection property=&quot;accounts&quot; ofType=&quot;account&quot;&gt;
            &lt;id column=&quot;aid&quot; property=&quot;id&quot;/&gt;
            &lt;result column=&quot;uid&quot; property=&quot;uid&quot;/&gt;
            &lt;result column=&quot;money&quot; property=&quot;money&quot;/&gt;
        &lt;/collection&gt;
    &lt;/resultMap&gt;

    &lt;!--查询所有--&gt;
    &lt;select id=&quot;findAll&quot; resultMap=&quot;userMap&quot;&gt;
        select u.*,a.id as aid ,a.uid,a.money from user u left outer join account a on u.id =a.uid
    &lt;/select&gt;</code></pre>
<p>注：<br>collection：</p>
<ul>
<li>部分定义了用户关联的账户信息。表示关联查询结果集</li>
</ul>
<p>property=” accList “ ：</p>
<ul>
<li>关联查询的结果集存储在 User 对象的上哪个属性。</li>
</ul>
<p>ofType=” account “：</p>
<ul>
<li>指定关联查询的结果集中的对象类型即List中的对象类型。此处可以使用别名，也可以使用全限定名。</li>
</ul>
<p>4、 测试方法：</p>
<pre><code class="java">    @Test
    public void testFindAll() &#123;
        List&lt;User&gt; users = userDao.findAll();
        for (User user : users) &#123;
            System.out.println(&quot;用户的信息：&quot;);
            System.out.println(user);
            System.out.println(user.getAccounts());
        &#125;
    &#125;</code></pre>
<p>5、运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201114111944114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h4 id="十、-Mybatis-多表查询——多对多"><a href="#十、-Mybatis-多表查询——多对多" class="headerlink" title="十、 Mybatis 多表查询——多对多"></a>十、 Mybatis 多表查询——多对多</h4><p><strong>1、实现 Role 到 User 多对多</strong>：</p>
<p>1、编写 Role 实体类：</p>
<pre><code class="java">public class Role implements Serializable &#123;
    private Integer roleId;
    private String roleName;
    private String roleDesc;
    private List&lt;User&gt; users;

    public List&lt;User&gt; getUsers() &#123;
        return users;
    &#125;

    public void setUsers(List&lt;User&gt; users) &#123;
        this.users = users;
    &#125;

    public Integer getRoleId() &#123;
        return roleId;
    &#125;

    public void setRoleId(Integer roleId) &#123;
        this.roleId = roleId;
    &#125;

    public String getRoleName() &#123;
        return roleName;
    &#125;

    public void setRoleName(String roleName) &#123;
        this.roleName = roleName;
    &#125;

    public String getRoleDesc() &#123;
        return roleDesc;
    &#125;

    public void setRoleDesc(String roleDesc) &#123;
        this.roleDesc = roleDesc;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;Role&#123;&quot; +
                &quot;roleId=&quot; + roleId +
                &quot;, roleName=&#39;&quot; + roleName + &#39;\&#39;&#39; +
                &quot;, roleDesc=&#39;&quot; + roleDesc + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>2、编写 Role 持久层接口：</p>
<pre><code class="java">    /**
     * 查询所有角色
     * @return
     */
    List&lt;Role&gt; findAll();</code></pre>
<p>3、编写映射文件：</p>
<pre><code class="xml">&lt;mapper namespace=&quot;com.itheima.dao.IRoleDao&quot;&gt;
    &lt;!--定义role表的ResultMap--&gt;
    &lt;resultMap id=&quot;roleMap&quot; type=&quot;role&quot;&gt;
        &lt;id property=&quot;roleId&quot; column=&quot;rid&quot;&gt;&lt;/id&gt;
        &lt;result property=&quot;roleName&quot; column=&quot;role_name&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;roleDesc&quot; column=&quot;role_desc&quot;&gt;&lt;/result&gt;
        &lt;collection property=&quot;users&quot; ofType=&quot;user&quot;&gt;
            &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;
            &lt;result column=&quot;username&quot; property=&quot;username&quot;&gt;&lt;/result&gt;
            &lt;result column=&quot;address&quot; property=&quot;address&quot;&gt;&lt;/result&gt;
            &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;
            &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;&gt;&lt;/result&gt;
        &lt;/collection&gt;

    &lt;/resultMap&gt;
    &lt;!--查询所有--&gt;
    &lt;select id=&quot;findAll&quot; resultMap=&quot;roleMap&quot;&gt;
       select u.*,r.id as rid,r.role_name,r.role_desc from role r
       left outer join user_role ur on r.id = ur.rid
       left outer join user u on u.id = ur.uid
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre>
<p>4、测试类：</p>
<pre><code class="java">    /**
     * 测试查询所有
     */
    @Test
    public void testFindAll() &#123;
        List&lt;Role&gt; roles = roleDao.findAll();
        for (Role role : roles) &#123;
            System.out.println(&quot;---每个角色的信息----&quot;);
            System.out.println(role);
            System.out.println(role.getUsers());
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201115145411115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><strong>2、实现 User 到 Role 的多对多</strong>：</p>
<p>大体步骤和上面同理，其中sql语句需改为：</p>
<pre><code class="sql"> select u.*,r.id as rid,r.role_name,r.role_desc from user u
       left outer join user_role ur on u.id = ur.rid
       left outer join role r on r.id = ur.uid</code></pre>
<h4 id="十一、-Mybatis-延迟加载策略"><a href="#十一、-Mybatis-延迟加载策略" class="headerlink" title="十一、 Mybatis 延迟加载策略"></a>十一、 Mybatis 延迟加载策略</h4><p>通过前面的学习，我们已经掌握了 Mybatis 中一对一，一对多，多对多关系的配置及实现，可以实现对象的关联查询。实际开发过程中很多时候我们并不需要总是在加载用户信息时就一定要加载他的账户信息。此时就是我们所说的延迟加载。</p>
<p><strong>1、何为延迟加载</strong>?</p>
<p> 就是在需要用到数据时才进行加载，不需要用到数据时就不加载数据。延迟加载也称懒加载。</p>
<p> 好处：</p>
<ul>
<li>先从单表查询，需要时再从关联表去关联查询，大大提高数据库性能，因为查询单表要比关联查询多张表速度要快。</li>
</ul>
<p>坏处：</p>
<ul>
<li>因为只有当需要用到数据时，才会进行数据库查询，这样在大批量数据查询时，因为查询工作也要消耗时间，所以可能造成用户等待时间变长，造成用户体验下降。</li>
</ul>
<p><strong>2、使用 assocation 实现延迟加载</strong>：</p>
<p>需求：</p>
<ul>
<li>查询账户(Account) 信息并且关联查询用户(User) 信息。如果先查询账户(Account) 信息即可满足要求，当我们需要查询用户(User) 信息时再查询用户(User) 信息。把对用户(User) 信息的按需去查询就是延迟加载。</li>
</ul>
<p>1、DAO 接口：</p>
<pre><code class="java">  List&lt;Account&gt; findAll();</code></pre>
<p>2、持久层映射文件：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;mapper namespace=&quot;com.itheima.dao.IAccountDao&quot;&gt;

    &lt;!-- 建立对应关系 --&gt;
    &lt;resultMap type=&quot;account&quot; id=&quot;accountMap&quot;&gt;
        &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;uid&quot; property=&quot;uid&quot;/&gt;
        &lt;result column=&quot;money&quot; property=&quot;money&quot;/&gt;

        &lt;!-- 它是用于指定从表方的引用实体属性的 --&gt;
        &lt;association property=&quot;user&quot; javaType=&quot;user&quot;
                     select=&quot;com.itheima.dao.IUserDao.findById&quot;
                     column=&quot;uid&quot;&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;

    &lt;select id=&quot;findAll&quot; resultMap=&quot;accountMap&quot;&gt;
      select * from account
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre>
<p>其中：</p>
<ul>
<li>select： 填写我们要调用的 select 映射的 id</li>
<li>column ： 填写我们要传递给 select 映射的参数</li>
</ul>
<p>3、User 的持久层接口和映射文件：</p>
<pre><code class="java">User findById(Integer userId); </code></pre>
<pre><code class="xml">&lt;!--根据 id 查询--&gt;
&lt;select id=&quot;findById&quot; resultType=&quot;user&quot; parameterType=&quot;int&quot; &gt;
    select * from user where id = #&#123;uid&#125;
&lt;/select&gt;</code></pre>
<p>4、开启 Mybatis 的延迟加载策略：</p>
<p>在 SqlMapConfig.xml 中配置</p>
<pre><code class="xml">    &lt;!--开启延迟加载的支持--&gt;
    &lt;settings&gt;
        &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
        &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt;
    &lt;/settings&gt;</code></pre>
<ul>
<li>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 </li>
<li>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属性会按需加载。</li>
</ul>
<p>5、测试查询用户信息时：</p>
<pre><code class="java">@Test
    public void testFindAll() &#123;
        List&lt;Account&gt; accounts = accountDao.findAll();
        for (Account account : accounts) &#123;
            System.out.println(&quot;每个account的信息：--------------&quot;);
            System.out.println(account);
            System.out.println(account.getUser());
        &#125;
    &#125;</code></pre>
<p>测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201116230506709.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>可以看到SQL语句全部执行了。</p>
<p>6、测试只查账户信息不查用户信息：</p>
<pre><code class="java">@Test
    public void testFindAll() &#123;
        List&lt;Account&gt; accounts = accountDao.findAll();
       /* for (Account account : accounts) &#123;
            System.out.println(&quot;每个account的信息：--------------&quot;);
            System.out.println(account);
            System.out.println(account.getUser());
        &#125;*/
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201116231408878.png#pic_center" alt="在这里插入图片描述"><br>可以看到只执行了一条SQL语句，即执行了延迟加载。</p>
<p><strong>3、使用 Collection 实现延迟加载</strong>：</p>
<p>同样我们也可以在一对多关系配置的<code>&lt;collection&gt;</code>结点中配置延迟加载策略。<code>&lt;collection&gt;</code>结点中也有 select 属性，column 属性。</p>
<p>需求：</p>
<ul>
<li>完成加载用户对象时，查询该用户所拥有的账户信息。</li>
</ul>
<p>1、 User 实体类：</p>
<pre><code class="java">public class User implements Serializable &#123;

    private Integer Id;
    private String username;
    private String Address;
    private String Sex;
    private Date Birthday;

    private List&lt;Account&gt; accounts;

    public List&lt;Account&gt; getAccounts() &#123;
        return accounts;
    &#125;

    public void setAccounts(List&lt;Account&gt; accounts) &#123;
        this.accounts = accounts;
    &#125;

    public Integer getId() &#123;
        return Id;
    &#125;

    public void setId(Integer Id) &#123;
        this.Id = Id;
    &#125;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public String getAddress() &#123;
        return Address;
    &#125;

    public void setAddress(String address) &#123;
        Address = address;
    &#125;

    public String getSex() &#123;
        return Sex;
    &#125;

    public void setSex(String sex) &#123;
        Sex = sex;
    &#125;

    public Date getBirthday() &#123;
        return Birthday;
    &#125;

    public void setBirthday(Date birthday) &#123;
        Birthday = birthday;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;User&#123;&quot; +
                &quot;Id=&quot; + Id +
                &quot;, username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, Address=&#39;&quot; + Address + &#39;\&#39;&#39; +
                &quot;, Sex=&#39;&quot; + Sex + &#39;\&#39;&#39; +
                &quot;, Birthday=&quot; + Birthday +
                &#39;&#125;&#39;;
    &#125;
&#125;</code></pre>
<p>2、用户（User）和账户（Account）持久层接口的方法：</p>
<pre><code class="java">    /**
     * 查询所有用户
     *
     * @return
     */
    List&lt;User&gt; findAll();

    /**
     * 根据用户 id 查询账户信息
     * @param uid
     * @return
     */
    List&lt;User&gt; findByUid(Integer uid);
</code></pre>
<p>3、编写用户持久层映射配置：</p>
<pre><code class="xml">&lt;resultMap type=&quot;user&quot; id=&quot;userMap&quot;&gt;
        &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;
        &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
        &lt;result column=&quot;address&quot; property=&quot;address&quot;/&gt;
        &lt;result column=&quot;sex&quot; property=&quot;sex&quot;/&gt;
        &lt;result column=&quot;birthday&quot; property=&quot;birthday&quot;/&gt;

        &lt;!-- collection 是用于建立一对多中集合属性的对应关系 
        ofType 用于指定集合元素的数据类型
        --&gt;
        &lt;collection property=&quot;accounts&quot; ofType=&quot;account&quot;
                    select=&quot;com.itheima.dao.IAccountDao.findByUid&quot;
                    column=&quot;id&quot;&gt;
        &lt;/collection&gt;
    &lt;/resultMap&gt;

    &lt;!--查询所有--&gt;
    &lt;select id=&quot;findAll&quot; resultMap=&quot;userMap&quot;&gt;
        select * from user
    &lt;/select&gt;</code></pre>
<p><code>&lt;collection&gt;</code>标签：</p>
<ul>
<li>主要用于加载关联的集合对象</li>
</ul>
<p>select 属性：</p>
<ul>
<li>用于指定查询 account 列表的 sql 语句，所以填写的是该 sql 映射的 id</li>
</ul>
<p>column 属性：</p>
<ul>
<li>用于指定 select 属性的 sql 语句的参数来源，上面的参数来自于 user 的 id 列，所以就写成 id 这一个字段名了</li>
</ul>
<p>4、编写账户持久层映射配置：</p>
<pre><code class="xml">    &lt;!-- 根据用户 id 查询账户信息 --&gt;
    &lt;select id=&quot;findByUid&quot; resultType=&quot;account&quot; parameterType=&quot;int&quot;&gt;
        select * from account where uid = #&#123;uid&#125;
    &lt;/select&gt;</code></pre>
<p>5、延时加载 测试只加载用户信息：</p>
<pre><code class="java"> @Test
    public void testFindAll() &#123;
        List&lt;User&gt; users = userDao.findAll();
      /*  for (User user : users) &#123;
            System.out.println(&quot;用户的信息：&quot;);
            System.out.println(user);
            System.out.println(user.getAccounts());
        &#125;*/
    &#125;</code></pre>
<p>测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201116233927533.png#pic_center" alt="在这里插入图片描述"></p>
<p>可以发现并没有加载 Account 账户信息。</p>
<h4 id="十二、-Mybatis-缓存"><a href="#十二、-Mybatis-缓存" class="headerlink" title="十二、 Mybatis 缓存"></a>十二、 Mybatis 缓存</h4><p>像大多数的持久化框架一样，Mybatis 也提供了缓存策略，通过缓存策略来减少数据库的查询次数，从而提高性能。</p>
<p>Mybatis 中缓存分为一级缓存，二级缓存。</p>
<p><img src="http://img-blog.csdnimg.cn/20201117191943967.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><strong>1、Mybatis 一级缓存</strong>：</p>
<p>一级缓存是 SqlSession 级别的缓存，只要 SqlSession 没有 flush 或 close，它就存在。</p>
<p>验证一级缓存的存在：</p>
<p>测试方法：</p>
<pre><code class="java">  @Test
    public void testFirstCache() &#123;
        User user1 = userDao.findById(41);
        System.out.println(user1);

        User user2 = userDao.findById(41);
        System.out.println(user2);

        System.out.println(user1 == user2);
    &#125;</code></pre>
<p>测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201117200149170.png" alt="在这里插入图片描述"><br><img src="http://img-blog.csdnimg.cn/20201117200201555.png" alt="在这里插入图片描述"><br>可以发现，虽然在上面的代码中查询了两次，但最后只执行了一次数据库操作，这就是 Mybatis 提供给我们的一级缓存在起作用了。因为一级缓存的存在，导致第二次查询 id 为 41 的记录时，并没有发出 sql 语句从数据库中查询数据，而是从一级缓存中查询。</p>
<p>测试一级缓存的清空：</p>
<p>测试方法：</p>
<pre><code class="java"> @Test
    public void testFirstCache() &#123;
        User user1 = userDao.findById(41);
        System.out.println(user1);
        // sqlSession.close();

        //再次获取 SqlSession 对象
        // sqlSession = factory.openSession();
        //userDao = sqlSession.getMapper(IUserDao.class);

        sqlSession.clearCache();//此方法也可以清空缓存

        User user2 = userDao.findById(41);
        System.out.println(user2);
        System.out.println(user1 == user2);

    &#125;</code></pre>
<p>测试结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201117200804977.png" alt="在这里插入图片描述"><br><img src="http://img-blog.csdnimg.cn/20201117200834562.png" alt="在这里插入图片描述"></p>
<p>当执行  sqlSession.clearCache() 后，再次获取sqlSession并查询id=41的User对象时，又重新执行了sql语句，从数据库进行了查询操作。</p>
<p><strong>一级缓存的分析</strong>：</p>
<p>一级缓存是 SqlSession 范围的缓存，当调用 SqlSession 的修改，添加，删除，commit()，close()方法时，就会清空一级缓存。</p>
<p><img src="http://img-blog.csdnimg.cn/20201117201409802.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>当第一次发起查询用户 id 为 1 的用户信息，先去找缓存中是否有 id 为 1 的用户信息，如果没有，从数据库查询用户信息。</p>
<p>得到用户信息，将用户信息存储到一级缓存中。</p>
<p>如果 sqlSession 去执行 commit 操作（执行插入、更新、删除），清空 SqlSession 中的一级缓存，这样做的目的为了让缓存中存储的是最新的信息，避免脏读。</p>
<p>第二次发起查询用户 id 为 1 的用户信息，先去找缓存中是否有 id 为 1 的用户信息（此时已经没有一级缓存了），如果缓存中有，则直接从缓存中获取用户信息，没有则重新发起查询。</p>
<p><strong>2、Mybatis 二级缓存</strong>：</p>
<p>它是 Mybatis 中 SqlSessionFactory 对象的缓存。由同一个 SqlSessionFactory 对象创建的 SqlSession 共享其缓存。</p>
<p><img src="http://img-blog.csdnimg.cn/20201117202533218.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>假设：</p>
<p>sqlSession1 去查询用户信息，查询到用户信息会将查询数据存储到二级缓存中。</p>
<p>如果 SqlSession3 去执行相同 mapper 映射下 sql，执行 commit 提交，将会清空该 mapper 映射下的二级缓存区域的数据。</p>
<p>sqlSession2 去查询与 sqlSession1 相同的用户信息，首先会去缓存中找是否存在数据，如果存在直接从缓存中取出数据,，否则重新发起查询（本例）。</p>
<p><strong>二级缓存的使用步骤</strong>：</p>
<p>1、让Mybatis框架支持二级缓存（在SqlMapConfig.xml中配置）：</p>
<pre><code class="xml">&lt;settings&gt;
    &lt;!-- 开启二级缓存的支持 --&gt;
    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;</code></pre>
<p>因为 cacheEnabled 的取值默认就为 true，所以这一步可以省略不配置。</p>
<p>true 代表开启二级缓存；为false 代表不开启二级缓存。</p>
<p>2、让当前的映射文件支持二级缓存（在IUserDao.xml中配置）：</p>
<pre><code class="xml">    &lt;!-- 开启二级缓存的支持 --&gt;
    &lt;cache/&gt;</code></pre>
<p>3、让当前的操作支持二级缓存（在select标签中配置）：</p>
<pre><code class="xml">&lt;!-- 根据 id 查询 --&gt;
&lt;select id=&quot;findById&quot; resultType=&quot;user&quot; parameterType=&quot;int&quot; useCache=&quot;true&quot;&gt;
    select * from user where id = #&#123;uid&#125;
&lt;/select&gt;</code></pre>
<p>将 IUserDao.xml 映射文件中的<code>&lt;select&gt;</code>标签中设置 useCache=” true “ 代表当前这个 statement 要使用二级缓存，如果不使用二级缓存可以设置为 false。</p>
<p>注意：针对每次查询都需要最新的数据 sql，要设置成 useCache=false，禁用二级缓存。</p>
<p>测试：</p>
<pre><code class="java"> @Test
 public void testFirstLevelCache()&#123;
     SqlSession sqlSession1 = factory.openSession();
     IUserDao dao1 = sqlSession1.getMapper(IUserDao.class);
     User user1 = dao1.findById(41);
     System.out.println(user1);
     sqlSession1.close();//一级缓存消失

     SqlSession sqlSession2 = factory.openSession();
     IUserDao dao2 = sqlSession2.getMapper(IUserDao.class);
     User user2 = dao2.findById(41);
     System.out.println(user2);
     sqlSession2.close();

     System.out.println(user1 == user2);
 &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201117203958859.png" alt="在这里插入图片描述"><br><img src="http://img-blog.csdnimg.cn/2020111720403564.png" alt="在这里插入图片描述"><br>经过上面的测试，发现执行了两次查询，并且在执行第一次查询后，我们关闭了一级缓存，再去执行第二次查询时，我们发现并没有对数据库发出 sql 语句，所以此时的数据就只能是来自于我们所说的二级缓存。</p>
<p>user1 = user2 = false 的原因是 二级缓存存放的是 <strong>数据</strong> 而不是对象，每次查询都会创建一个新的对象。 </p>
<h4 id="十三、-Mybatis-注解开发"><a href="#十三、-Mybatis-注解开发" class="headerlink" title="十三、 Mybatis 注解开发"></a>十三、 Mybatis 注解开发</h4><p><strong>1、mybatis 的常用注解</strong>：</p>
<pre><code class="sql">@Insert: 实现新增
@Update: 实现更新
@Delete: 实现删除
@Select: 实现查询

@Result: 实现结果集封装
@Results: 可以与@Result 一起使用，封装多个结果集
@ResultMap: 实现引用@Results 定义的封装

@One: 实现一对一结果集封装
@Many: 实现一对多结果集封装

@SelectProvider: 实现动态 SQL 映射
@CacheNamespace: 实现注解二级缓存的使用</code></pre>
<p><strong>2、使用 Mybatis 注解实现基本 CRUD</strong>：</p>
<p>1、实体类：</p>
<pre><code class="java">public class User implements Serializable &#123;
    private Integer id;
    private String username;
    private String address;
    private String sex;
    private Date birthday;

    public Integer getId() &#123;
        return id;
    &#125;

    public void setId(Integer id) &#123;
        this.id = id;
    &#125;

    public String getUsername() &#123;
        return username;
    &#125;

    public void setUsername(String username) &#123;
        this.username = username;
    &#125;

    public String getAddress() &#123;
        return address;
    &#125;

    public void setAddress(String address) &#123;
        this.address = address;
    &#125;

    public String getSex() &#123;
        return sex;
    &#125;

    public void setSex(String sex) &#123;
        this.sex = sex;
    &#125;

    public Date getBirthday() &#123;
        return birthday;
    &#125;

    public void setBirthday(Date birthday) &#123;
        this.birthday = birthday;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;User&#123;&quot; +
                &quot;id=&quot; + id +
                &quot;, username=&#39;&quot; + username + &#39;\&#39;&#39; +
                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +
                &quot;, sex=&#39;&quot; + sex + &#39;\&#39;&#39; +
                &quot;, birthday=&quot; + birthday +
                &#39;&#125;&#39;;
    &#125;
&#125;
</code></pre>
<p>2、使用注解方式开发持久层接口：</p>
<pre><code class="java">public interface IUserDao &#123;
    /**
     * 查询所有
     * @return
     */
    @Select(&quot;select * from user&quot;)
    List&lt;User&gt; findAll();

    /**
     * 根据 id 查询一个用户
     * @param userId
     * @return
     */

    @Select(&quot;select * from user where id = #&#123;uid&#125; &quot;)
    User findById(Integer userId);


    /**
     * 插入操作
     * @param user
     * @return
     */
    @Insert(&quot;insert into user(username,sex,birthday,address)values(#&#123;username&#125;,#&#123;sex&#125;,#&#123;birthday&#125;,#&#123;address&#125;)&quot;)
    int saveUser(User user);

    /**
     * 更新操作
     * @param user
     * @return
     */
    @Update(&quot;update user set username=#&#123;username&#125;, address =#&#123;address&#125;, sex =#&#123;sex&#125;, birthday =#&#123;birthday&#125;where id =#&#123;id&#125;&quot;)
    int updateUser(User user);

    /**
     * 删除用户
     * @param userId
     * @return
     */
    @Delete(&quot;delete from user where id = #&#123;uid&#125; &quot;)
    int deleteUser(Integer userId);

    /**
     * 查询使用聚合函数
     * @return
     */
    @Select(&quot;select count(*) from user &quot;)
    int findTotal();

    /**
     * 模糊查询
     * @param name
     * @return
     */
    @Select(&quot;select * from user where username like #&#123;username&#125; &quot;)
    List&lt;User&gt; findByName(String name);
&#125;</code></pre>
<p>3、SqlMapConfig 配置文件：</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;

&lt;configuration&gt;
    &lt;!--引入外部文件--&gt;
    &lt;properties resource=&quot;jdbcConfig.properties&quot;/&gt;
    &lt;!--配置别名--&gt;
    &lt;typeAliases&gt;
        &lt;package name=&quot;com.smk.domain&quot;/&gt;
    &lt;/typeAliases&gt;
    &lt;environments default=&quot;mysql&quot;&gt;
        &lt;environment id=&quot;mysql&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;!-- 配置 dao 接口的位置，它有两种方式
    第一种：使用 mapper 标签配置 class 属性
    第二种：使用 package 标签，直接指定 dao 接口所在的包
    --&gt;
    &lt;mappers&gt;
        &lt;package name=&quot;com.smk.dao&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;</code></pre>
<p>4、测试方法：</p>
<p>测试方法和xml映射配置开发是一样的。</p>
<p><strong>3、使用注解实现复杂关系映射开发</strong>：</p>
<p>实现复杂关系映射之前，可以在映射文件中通过配置 <code>&lt;resultMap&gt;</code> 来实现，在使用注解开发时我们需要借助<code>@Results</code> 注解，<code>@Result</code> 注解，<code>@One</code> 注解，<code>@Many</code> 注解。</p>
<p><strong>3.1、当POJO属性和数据库字段不一致时</strong>：</p>
<p>例：<br>1、 实体类：</p>
<pre><code class="java">    private Integer userId;
    private String userName;
    private String userAddress;
    private String userSex;
    private Date userBirthday;</code></pre>
<p>2、dao接口：</p>
<pre><code class="java">public interface IUserDao &#123;
    /**
     * 查询所有
     *
     * @return
     */
    @Select(&quot;select * from user&quot;)
    @Results(id = &quot;userMap&quot;, value = &#123;
            @Result(id = true, column = &quot;id&quot;, property = &quot;userId&quot;),
            @Result(column = &quot;username&quot;, property = &quot;userName&quot;),
            @Result(column = &quot;address&quot;, property = &quot;userAddress&quot;),
            @Result(column = &quot;sex&quot;, property = &quot;userSex&quot;),
            @Result(column = &quot;birthday&quot;, property = &quot;userBirthday&quot;)
    &#125;)
    List&lt;User&gt; findAll();

    /**
     * 根据 id 查询用户
     *
     * @param userId
     * @return
     */
    @Select(&quot;select * from user where id = #&#123;uid&#125; &quot;)
    @ResultMap(&quot;userMap&quot;)
    User findById(Integer userId);


    /**
     * 模糊查询
     *
     * @param name
     * @return
     */
    @Select(&quot;select * from user where username like #&#123;username&#125;&quot;)
    @ResultMap(&quot;userMap&quot;)
    List&lt;User&gt; findByName(String name);
&#125;</code></pre>
<p>其中：</p>
<p>@Results 注解代替的是标签<code>&lt;resultMap&gt;</code></p>
<p>@Resutl 注解代替了 <code>&lt;id&gt;</code>标签和<code>&lt;result&gt;</code>标签</p>
<p>@Result 中 属性介绍：</p>
<ul>
<li>id 是否是主键字段</li>
<li>column 数据库的列名</li>
<li>property 需要装配的属性名</li>
</ul>
<p>@Result定义后，在其他方法处，便可以使用该@Results定义的resultMap了。</p>
<p><strong>3.2、使用注解实现一对一复杂关系映射</strong>：</p>
<p>1、User 实体类及 Account 实体类：</p>
<p>和上面xml配置方式相同。</p>
<p>2、账户的持久层接口及注解配置：</p>
<pre><code class="java">public interface IAccountDao &#123;
    @Select(&quot;select * from account&quot;)
    @Results(id = &quot;accountMap&quot;, value = &#123;
            @Result(id = true, column = &quot;id&quot;, property = &quot;id&quot;),
            @Result(column = &quot;uid&quot;, property = &quot;uid&quot;),
            @Result(column = &quot;money&quot;, property = &quot;money&quot;),
            @Result(property = &quot;user&quot;, column = &quot;uid&quot;, one = @One(select = &quot;com.smk.dao.IUserDao.findById&quot;, fetchType = FetchType.EAGER))

    &#125;)
    List&lt;Account&gt; findAll();
&#125;</code></pre>
<p>@One 注解（一对一）：</p>
<ul>
<li>代替了<code>&lt;assocation&gt;</code>标签，是多表查询的关键，在注解中用来指定子查询返回单一对象。</li>
</ul>
<p>@One 注解属性介绍：</p>
<ul>
<li>select 指定用来多表查询的 sqlmapper</li>
<li>fetchType 会覆盖全局的配置参数 lazyLoadingEnabled。。</li>
</ul>
<p>使用格式：</p>
<ul>
<li>@Result(column=””,property=””,one=@One(select=””))</li>
</ul>
<p>3、用户的持久层接口及注解配置：</p>
<pre><code class="java">public interface IUserDao &#123;
    /**
     * 查询所有
     *
     * @return
     */
    @Select(&quot;select * from user&quot;)
    @Results(id = &quot;userMap&quot;, value = &#123;
            @Result(id = true, column = &quot;id&quot;, property = &quot;userId&quot;),
            @Result(column = &quot;username&quot;, property = &quot;userName&quot;),
            @Result(column = &quot;address&quot;, property = &quot;userAddress&quot;),
            @Result(column = &quot;sex&quot;, property = &quot;userSex&quot;),
            @Result(column = &quot;birthday&quot;, property = &quot;userBirthday&quot;)
    &#125;)
    List&lt;User&gt; findAll();

    /**
     * 根据 id 查询用户
     *
     * @param userId
     * @return
     */
    @Select(&quot;select * from user where id = #&#123;uid&#125; &quot;)
    @ResultMap(&quot;userMap&quot;)
    User findById(Integer userId);
&#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201126001548593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><strong>3.3、使用注解实现一对多复杂关系映射</strong>：</p>
<p>1、User 实体类及 Account 实体类：</p>
<ul>
<li>和上面xml配置方式相同。</li>
</ul>
<p>2、用户的持久层接口及注解配置：</p>
<pre><code class="java">public interface IUserDao &#123;
    /**
     * 查询所有
     *
     * @return
     */
    @Select(&quot;select * from user&quot;)
    @Results(id = &quot;userMap&quot;, value = &#123;
            @Result(id = true, column = &quot;id&quot;, property = &quot;userId&quot;),
            @Result(column = &quot;username&quot;, property = &quot;userName&quot;),
            @Result(column = &quot;address&quot;, property = &quot;userAddress&quot;),
            @Result(column = &quot;sex&quot;, property = &quot;userSex&quot;),
            @Result(column = &quot;birthday&quot;, property = &quot;userBirthday&quot;),
            @Result(property = &quot;accounts&quot;, column = &quot;id&quot;, many = @Many(
                    select = &quot;com.smk.dao.IAccountDao.findByUid&quot;,
                    fetchType = FetchType.LAZY))
    &#125;)
    List&lt;User&gt; findAll();
&#125;</code></pre>
<p>3、账户的持久层接口及注解配置：</p>
<pre><code class="java">public interface IAccountDao &#123;

    // 根据用户 id 查询用户下的所有账户
    @Select(&quot;select * from account where uid = #&#123;uid&#125; &quot;)
    List&lt;Account&gt; findByUid(Integer userId);
&#125;</code></pre>
<p>4、添加测试方法：</p>
<pre><code class="java">    //测试查询所有
    @Test
    public void testFindAll() &#123;
        List&lt;User&gt; users = userDao.findAll();
        for (User user : users) &#123;
            System.out.println(&quot;-----每个用户的内容-----&quot;);
            System.out.println(user);
            System.out.println(user.getAccounts());
        &#125;
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201126152434428.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNTMxNjY5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>测试延时加载：</p>
<pre><code class="java"> @Test
    public void testFindAll() &#123;
        List&lt;User&gt; users = userDao.findAll();
       /* for (User user : users) &#123;
            System.out.println(&quot;-----每个用户的内容-----&quot;);
            System.out.println(user);
            System.out.println(user.getAccounts());
        &#125;*/
    &#125;</code></pre>
<p>运行结果：</p>
<p><img src="http://img-blog.csdnimg.cn/20201126160013905.png#pic_center" alt="在这里插入图片描述"></p>
<p><strong>3.4、mybatis 基于注解的二级缓存</strong>：</p>
<p>1、在 SqlMapConfig 中开启二级缓存支持：</p>
<pre><code class="xml">&lt;!-- 配置二级缓存 --&gt;
&lt;settings&gt;
    &lt;!-- 开启二级缓存的支持 --&gt;
    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;</code></pre>
<p>2、在持久层接口中使用注解配置二级缓存：</p>
<pre><code class="java">@CacheNamespace(blocking=true)//mybatis 基于注解方式实现配置二级缓存
public interface IUserDao &#123;&#125;</code></pre>
<hr>

<p>🆗，至此mybatis的内容就总结完了（￣︶￣）↗　</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 2058751973@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2019-2020 未完成的歌
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
